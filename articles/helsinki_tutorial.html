<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Helsinki open data R tools • helsinki</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Helsinki open data R tools">
<meta property="og:description" content="helsinki">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">helsinki</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/helsinki_tutorial.html">Helsinki open data R tools</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ropengov/helsinki/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="helsinki_tutorial_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Helsinki open data R tools</h1>
                        <h4 class="author">Juuso Parkkinen, Pyry Kantanen</h4>
            
            <h4 class="date">2021-08-21</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ropengov/helsinki/blob/master/vignettes/helsinki_tutorial.Rmd"><code>vignettes/helsinki_tutorial.Rmd</code></a></small>
      <div class="hidden name"><code>helsinki_tutorial.Rmd</code></div>

    </div>

    
    
<div id="helsinki---tutorial" class="section level1">
<h1 class="hasAnchor">
<a href="#helsinki---tutorial" class="anchor"></a>helsinki - tutorial</h1>
<p>helsinki R package provides tools to access open data from the Helsinki region in Finland.</p>
<p>For contact information, source code and bug reports, see the project’s <a href="https://github.com/rOpenGov/helsinki">GitHub page</a>. For other similar packages and related blog posts, see the <a href="http://ropengov.org">rOpenGov</a> project website.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Release version for most users:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"helsinki"</span><span class="op">)</span></code></pre></div>
<p>Development version for developers and other interested parties:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://remotes.r-lib.org">remotes</a></span><span class="op">)</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"ropengov/helsinki"</span><span class="op">)</span></code></pre></div>
<p>Load the package.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rOpenGov/helsinki">helsinki</a></span><span class="op">)</span></code></pre></div>
</div>
<div id="api-access" class="section level2">
<h2 class="hasAnchor">
<a href="#api-access" class="anchor"></a>API Access</h2>
<p>The package has basic functions for interacting with WFS APIs, courtesy of <a href="https://ropengov.github.io/fmi2/">FMI2-package</a>: <code><a href="../reference/wfs_api.html">wfs_api()</a></code> for returning “wfs_api” and <code><a href="../reference/to_sf.html">to_sf()</a></code> for turning these objects to sf-objects.</p>
<p>All available features of a given API can be easily listed with the <code><a href="../reference/get_feature_list.html">get_feature_list()</a></code> function. Partly due to legacy considerations, partly due to user convenience we often use HSY API url in these function examples, sometimes even as a default option. The API functions can, however, be used with a wide variety of different <code>base.url</code> parameters.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">url</span> <span class="op">&lt;-</span> <span class="st">"https://kartta.hsy.fi/geoserver/wfs"</span>

<span class="va">hsy_features</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_feature_list.html">get_feature_list</a></span><span class="op">(</span>base.url <span class="op">=</span> <span class="va">url</span><span class="op">)</span>
<span class="va">feature_of_interest</span> <span class="op">&lt;-</span> <span class="va">hsy_features</span><span class="op">$</span><span class="va">Name</span><span class="op">[</span><span class="fl">20</span><span class="op">]</span>
<span class="co"># Location of waterposts</span>
<span class="va">feature_of_interest</span>
<span class="co">#&gt; [1] "vesihuolto:HSY_vesipostit_2014"</span></code></pre></div>
<p>When the wanted feature and its Name (in other words: Namespace:Title combination) is known, it can be downloaded with <code><a href="../reference/get_feature.html">get_feature()</a></code> by providing the correct <code>base.url</code> and the Name as the <code>typename</code> parameter.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># downloading a feature</span>
<span class="va">waterposts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_feature.html">get_feature</a></span><span class="op">(</span>base.url <span class="op">=</span> <span class="va">url</span>, typename <span class="op">=</span> <span class="va">feature_of_interest</span><span class="op">)</span>
<span class="co"># Visualizing the location of waterposts</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">waterposts</span><span class="op">$</span><span class="va">geom</span><span class="op">)</span></code></pre></div>
<p><img src="helsinki_tutorial_files/figure-html/wfs2-1.png" width="525"></p>
<p>Dots on a blank canvas do not make much sense and therefore helsinki-package has <code><a href="../reference/get_city_map.html">get_city_map()</a></code> function for downloading city district boundaries. An example of this is provided in the <a href="#helsinki-region-district-maps">Helsinki region district maps</a> section of this vignette.</p>
<p>Helsinki-package provides an easy-to-use menu-driven <code><a href="../reference/select_feature.html">select_feature()</a></code> function that effectively combines <code><a href="../reference/get_feature_list.html">get_feature_list()</a></code> and <code><a href="../reference/get_feature.html">get_feature()</a></code>. At default it only returns the Name of the wanted function, but if <code>get</code> parameter is set to TRUE, it returns an sf_object which can be easily visualized.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Standard use</span>
<span class="va">selected_feature</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/select_feature.html">select_feature</a></span><span class="op">(</span>base.url <span class="op">=</span> <span class="va">url</span><span class="op">)</span>
<span class="va">feature</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_feature.html">get_feature</a></span><span class="op">(</span>base.url <span class="op">=</span> <span class="va">url</span>, typename <span class="op">=</span> <span class="va">selected_feature</span><span class="op">)</span>

<span class="co"># Skipping a redundant step with parameter get = TRUE</span>
<span class="va">feature</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/select_feature.html">select_feature</a></span><span class="op">(</span>base.url <span class="op">=</span> <span class="va">url</span>, get <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<div id="helsinki-region-environmental-services-hsy-open-data" class="section level3">
<h3 class="hasAnchor">
<a href="#helsinki-region-environmental-services-hsy-open-data" class="anchor"></a>Helsinki Region Environmental Services HSY open data</h3>
<p>The above example shows a general use case which can easily be applied to Helsinki Region Environmental Services (HSY) WFS API as well as other service providers’ APIs.</p>
<p>For legacy reasons, helsinki-package has also some specialized functions that aim to make downloading often used data as easy as possible.</p>
<p>Specifically, there are two new functions that replace deprecated functionalities from <code><a href="../reference/get_hsy.html">get_hsy()</a></code> function: <code><a href="../reference/get_vaestotietoruudukko.html">get_vaestotietoruudukko()</a></code> (population grid) and <code><a href="../reference/get_rakennustietoruudukko.html">get_rakennustietoruudukko()</a></code> (building information grid). As of writing, years 2015 to 2019 are supported but the API may be updated at any time and <code><a href="../reference/get_feature_list.html">get_feature_list()</a></code> can be used to download datasets that are not baked into these functions.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pop_grid</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_vaestotietoruudukko.html">get_vaestotietoruudukko</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2018</span><span class="op">)</span>
<span class="va">building_grid</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_rakennustietoruudukko.html">get_rakennustietoruudukko</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2016</span><span class="op">)</span>

<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>

<span class="co"># Logarithmic scales to make the visualizations more discernible</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">pop_grid</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>colour<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">asukkaita</span><span class="op">)</span>, fill<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">asukkaita</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="helsinki_tutorial_files/figure-html/get_hsy_examples-1.png" width="525"></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">building_grid</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>colour<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">kerala_yht</span><span class="op">)</span>, fill<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">kerala_yht</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="helsinki_tutorial_files/figure-html/get_hsy_examples-2.png" width="525"></p>
<p>While easy enough to build, specialized functions such as these are probably not something that power users want to rely on in their work flows. They also add more manual phases to package maintenance and therefore are probably not the direction we’re heading in the future. If you feel differently about this and there is a dataset that gets a lot of use, feel free to drop us a suggestion in <a href="https://github.com/rOpenGov/helsinki/issues">GitHub</a>.</p>
</div>
</div>
<div id="service-and-event-information" class="section level2">
<h2 class="hasAnchor">
<a href="#service-and-event-information" class="anchor"></a>Service and event information</h2>
<p>Function <code><a href="../reference/get_servicemap.html">get_servicemap()</a></code> retrieves regional service data from city of Helsinki <a href="http://api.hel.fi/servicemap/v2/">Service Map API</a>, that contains data from the <a href="https://palvelukartta.hel.fi/fi/">Service Map</a>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Search for "puisto" (park) (specify q="query")</span>
<span class="va">search_puisto</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_servicemap.html">get_servicemap</a></span><span class="op">(</span>query<span class="op">=</span><span class="st">"search"</span>, q<span class="op">=</span><span class="st">"puisto"</span><span class="op">)</span>
<span class="co"># Study results: 47 variables in the data frame</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">search_puisto</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>
<span class="co">#&gt; List of 4</span>
<span class="co">#&gt;  $ count   : int 2130</span>
<span class="co">#&gt;  $ next    : chr "https://api.hel.fi/servicemap/v2/search/?page=2&amp;q=puisto"</span>
<span class="co">#&gt;  $ previous: NULL</span>
<span class="co">#&gt;  $ results :'data.frame':    20 obs. of  47 variables:</span></code></pre></div>
<p>We can see that this search returns a large number of results, over 2000. The results are returned as pages, where each page has 20 results by default. By giving no additional search parameters, we get 20 results from the first page of search results.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Get names for the first 20 results</span>
<span class="va">search_puisto</span><span class="op">$</span><span class="va">results</span><span class="op">$</span><span class="va">name</span><span class="op">$</span><span class="va">fi</span>
<span class="co">#&gt;  [1] "Sinebrychoffin puiston yleisövessa"                                </span>
<span class="co">#&gt;  [2] "Sibeliuksen puiston yleisövessa"                                   </span>
<span class="co">#&gt;  [3] "Töölönlahden puisto / Leikkipaikka"                                </span>
<span class="co">#&gt;  [4] "Esplanadin puiston WLAN-tukiasema"                                 </span>
<span class="co">#&gt;  [5] "Hesperian puiston yleisövessa"                                     </span>
<span class="co">#&gt;  [6] "Topeliuksen puiston yleisövessa"                                   </span>
<span class="co">#&gt;  [7] "Sibeliuksen puiston yleisövessa"                                   </span>
<span class="co">#&gt;  [8] "Pysäköintilippuautomaatti 334, Castreninkatu, puisto, korttimaksu" </span>
<span class="co">#&gt;  [9] "Pysäköintilippuautomaatti 132, Merimiehenkatu, puisto, korttimaksu"</span>
<span class="co">#&gt; [10] "Pysäköintilippuautomaatti 88, Pengerkatu, puisto, kolikkomaksu"    </span>
<span class="co">#&gt; [11] "Shakkilauta, Von Glanin puisto"                                    </span>
<span class="co">#&gt; [12] "Matti Heleniuksen puiston yleisövessa"                             </span>
<span class="co">#&gt; [13] "Shakkilauta, Katri Valan puisto"                                   </span>
<span class="co">#&gt; [14] "Tove Janssonin puiston yleisövessa"                                </span>
<span class="co">#&gt; [15] "Ala-Malmin puisto"                                                 </span>
<span class="co">#&gt; [16] "Pyhän Birgitan puisto"                                             </span>
<span class="co">#&gt; [17] "Everstinpuisto"                                                    </span>
<span class="co">#&gt; [18] "Kirkkojärvenpuisto"                                                </span>
<span class="co">#&gt; [19] "Lehtikaskenpuisto"                                                 </span>
<span class="co">#&gt; [20] "Leppäviidanpuisto"</span>

<span class="co"># See what kind of data is given for services</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">search_puisto</span><span class="op">$</span><span class="va">results</span><span class="op">)</span>
<span class="co">#&gt;  [1] "id"                              "connections"                    </span>
<span class="co">#&gt;  [3] "entrances"                       "accessibility_properties"       </span>
<span class="co">#&gt;  [5] "identifiers"                     "department"                     </span>
<span class="co">#&gt;  [7] "root_department"                 "provider_type"                  </span>
<span class="co">#&gt;  [9] "organizer_type"                  "contract_type"                  </span>
<span class="co">#&gt; [11] "is_active"                       "deleted_at"                     </span>
<span class="co">#&gt; [13] "organizer_name"                  "organizer_business_id"          </span>
<span class="co">#&gt; [15] "picture_url"                     "picture_entrance_url"           </span>
<span class="co">#&gt; [17] "streetview_entrance_url"         "description"                    </span>
<span class="co">#&gt; [19] "short_description"               "name"                           </span>
<span class="co">#&gt; [21] "street_address"                  "www"                            </span>
<span class="co">#&gt; [23] "address_postal_full"             "call_charge_info"               </span>
<span class="co">#&gt; [25] "picture_caption"                 "phone"                          </span>
<span class="co">#&gt; [27] "fax"                             "email"                          </span>
<span class="co">#&gt; [29] "accessibility_phone"             "accessibility_email"            </span>
<span class="co">#&gt; [31] "accessibility_www"               "created_time"                   </span>
<span class="co">#&gt; [33] "address_zip"                     "data_source"                    </span>
<span class="co">#&gt; [35] "extensions"                      "last_modified_time"             </span>
<span class="co">#&gt; [37] "accessibility_viewpoints"        "root_service_nodes"             </span>
<span class="co">#&gt; [39] "municipality"                    "service_nodes"                  </span>
<span class="co">#&gt; [41] "services"                        "keywords"                       </span>
<span class="co">#&gt; [43] "location"                        "accessibility_shortcoming_count"</span>
<span class="co">#&gt; [45] "sort_index"                      "object_type"                    </span>
<span class="co">#&gt; [47] "score"</span></code></pre></div>
<p>More results could be retrieved and viewed by giving additional <code>search</code> parameters.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">search_puisto</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_servicemap.html">get_servicemap</a></span><span class="op">(</span>query<span class="op">=</span><span class="st">"search"</span>, q<span class="op">=</span><span class="st">"puisto"</span>, page_size <span class="op">=</span> <span class="fl">30</span>, page <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>
<span class="va">search_puisto</span><span class="op">$</span><span class="va">results</span><span class="op">$</span><span class="va">name</span><span class="op">$</span><span class="va">fi</span>
<span class="co">#&gt;  [1] "Kaupungintalon puisto"                             </span>
<span class="co">#&gt;  [2] "Ankkuripohjanpuisto"                               </span>
<span class="co">#&gt;  [3] "Kuttulammenpuisto"                                 </span>
<span class="co">#&gt;  [4] "Rinkelipuisto"                                     </span>
<span class="co">#&gt;  [5] "Olarin asukaspuisto"                               </span>
<span class="co">#&gt;  [6] "Perkkaan asukaspuisto"                             </span>
<span class="co">#&gt;  [7] "Alli Tryggin puiston opaskoira-aitaus"             </span>
<span class="co">#&gt;  [8] "Leppävaaran asukaspuisto"                          </span>
<span class="co">#&gt;  [9] "Matinkylän asukaspuisto"                           </span>
<span class="co">#&gt; [10] "Hurtigin puisto"                                   </span>
<span class="co">#&gt; [11] "Nurmilinnunpuisto"                                 </span>
<span class="co">#&gt; [12] "Ruusutorpanpuisto"                                 </span>
<span class="co">#&gt; [13] "Tynnyripuisto"                                     </span>
<span class="co">#&gt; [14] "Karakallion asukaspuisto"                          </span>
<span class="co">#&gt; [15] "Asematien leikkipuisto"                            </span>
<span class="co">#&gt; [16] "Stenbergin puisto"                                 </span>
<span class="co">#&gt; [17] "Veijarivuoren puiston talviuintipaikka (Humaus ry)"</span>
<span class="co">#&gt; [18] "Suvelan asukaspuisto"                              </span>
<span class="co">#&gt; [19] "Kasavuoren puisto"                                 </span>
<span class="co">#&gt; [20] "Viherkallion asukaspuisto"                         </span>
<span class="co">#&gt; [21] "Kylätalo Palttinan asukaspuisto"                   </span>
<span class="co">#&gt; [22] "Mankkaan asukaspuisto"                             </span>
<span class="co">#&gt; [23] "Tapiolan asukaspuisto"                             </span>
<span class="co">#&gt; [24] "Pohjankulman puisto"                               </span>
<span class="co">#&gt; [25] "Suvelan puisto"                                    </span>
<span class="co">#&gt; [26] "Alberganesplanadin puisto"                         </span>
<span class="co">#&gt; [27] "Parkvillanpihan puisto"                            </span>
<span class="co">#&gt; [28] "Träskändan kartanopuisto"                          </span>
<span class="co">#&gt; [29] "Laivatorin puisto"                                 </span>
<span class="co">#&gt; [30] "Rantaraitin puisto"</span></code></pre></div>
<p>As we could see from above example, the returned data frame had 47 observations. At full width this output can be messy to handle in R console. One possible option would be to turn it into a more easily manageable tibble (which often is not a bad idea), another is to limit the extent of the query at the start. We do the latter and it can be done with the function parameter <code>only</code>:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Search for padel-related services in Helsinki</span>
<span class="va">search_padel</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_servicemap.html">get_servicemap</a></span><span class="op">(</span>query<span class="op">=</span><span class="st">"search"</span>, input<span class="op">=</span><span class="st">"padel"</span>, only<span class="op">=</span><span class="st">"unit.name, unit.location.coordinates, unit.street_address"</span>, municipality<span class="op">=</span><span class="st">"helsinki"</span><span class="op">)</span>
<span class="va">search_padel</span><span class="op">$</span><span class="va">results</span>
<span class="co">#&gt;       id                                    name.fi</span>
<span class="co">#&gt; 1  59998               Padel Helsinki / Padelkentät</span>
<span class="co">#&gt; 2  63925            Padel Messukeskus / Padelkentät</span>
<span class="co">#&gt; 3  64716           Padel Aurinkolahti / Padelkenttä</span>
<span class="co">#&gt; 4  45413         PadelCenter Helsinki / Padelkentät</span>
<span class="co">#&gt; 5  57222       Padel Club Viikinranta / Padelkenttä</span>
<span class="co">#&gt; 6  63927 Padel Arena Center Myllypuro / Padelkentät</span>
<span class="co">#&gt; 7  66781     Padel Messukeskus / Padelkentät (ulko)</span>
<span class="co">#&gt; 8  57221           ProPADEL Sörnäinen / Padelkenttä</span>
<span class="co">#&gt; 9  63926             Billebeino Padel / Padelkenttä</span>
<span class="co">#&gt; 10 62776                    Talihalli / Padelkenttä</span>
<span class="co">#&gt; 11 64747       Urheiluhallit Vuosaari / Padelkentät</span>
<span class="co">#&gt; 12 42296                 Smash Center / Padelkenttä</span>
<span class="co">#&gt; 13 62904 Laajasalon Palloiluhallit Oy / Padelkenttä</span>
<span class="co">#&gt;                                       name.sv           street_address.fi</span>
<span class="co">#&gt; 1                Padel Helsinki / Padelplaner           Lahnalahdentie 11</span>
<span class="co">#&gt; 2             Padel Mässcentrum / Padelplaner                Messuaukio 1</span>
<span class="co">#&gt; 3              Padel Aurinkolahti / Padelplan     Urheilukalastajankuja 1</span>
<span class="co">#&gt; 4       PadelCenter Helsingfors / Padelplaner          Hernesaarenranta 1</span>
<span class="co">#&gt; 5          Padel Club Viikinranta / Padelplan               Jokisuuntie 5</span>
<span class="co">#&gt; 6  Padel Arena Center Myllypuro / Padelplaner               Alakiventie 2</span>
<span class="co">#&gt; 7             Padel Mässcentrum / Padelplaner                Messuaukio 1</span>
<span class="co">#&gt; 8                 ProPADEL Sörnäs / Padelplan Sörnäisten rantapromenadi 1</span>
<span class="co">#&gt; 9                Billebeino Padel / Padelplan             Traverssikuja 3</span>
<span class="co">#&gt; 10                      Talihalli / Padelplan           Huopalahdentie 28</span>
<span class="co">#&gt; 11       Urheiluhallit Vuosaari / Padelplaner              Vuosaarentie 5</span>
<span class="co">#&gt; 12                   Smash Center / Padelplan                Varikkotie 4</span>
<span class="co">#&gt; 13   Laajasalon Palloiluhallit Oy / Padelplan           Sarvastonkaari 23</span>
<span class="co">#&gt;          street_address.sv           street_address.en location.type</span>
<span class="co">#&gt; 1         Braxviksvägen 11           Lahnalahdentie 11         Point</span>
<span class="co">#&gt; 2            Mässplatsen 1                Messuaukio 1         Point</span>
<span class="co">#&gt; 3     Sportfiskargränden 1     Urheilukalastajankuja 1         Point</span>
<span class="co">#&gt; 4       Ärtholmsstranden 1          Hernesaarenranta 1         Point</span>
<span class="co">#&gt; 5            Åminnevägen 5               Jokisuuntie 5         Point</span>
<span class="co">#&gt; 6        Understensvägen 2               Alakiventie 2         Point</span>
<span class="co">#&gt; 7            Mässplatsen 1                Messuaukio 1         Point</span>
<span class="co">#&gt; 8  Sörnäs strandpromenad 1 Sörnäisten rantapromenadi 1         Point</span>
<span class="co">#&gt; 9         Traversgränden 3             Traverssikuja 3         Point</span>
<span class="co">#&gt; 10         Hoplaksvägen 28           Huopalahdentie 28         Point</span>
<span class="co">#&gt; 11          Nordsjövägen 5              Vuosaarentie 5         Point</span>
<span class="co">#&gt; 12             Depåvägen 4                Varikkotie 4         Point</span>
<span class="co">#&gt; 13           Fladabågen 23           Sarvastonkaari 23         Point</span>
<span class="co">#&gt;    location.coordinates sort_index object_type    score</span>
<span class="co">#&gt; 1    24.86652, 60.16435          0        unit 7.414505</span>
<span class="co">#&gt; 2    24.93602, 60.20486          1        unit 7.414505</span>
<span class="co">#&gt; 3    25.15954, 60.20301          2        unit 7.303819</span>
<span class="co">#&gt; 4    24.93146, 60.15325          3        unit 7.303819</span>
<span class="co">#&gt; 5    24.98746, 60.21826          4        unit 6.798873</span>
<span class="co">#&gt; 6    25.07979, 60.22095          5        unit 6.528854</span>
<span class="co">#&gt; 7    24.93741, 60.20461          6        unit 6.528854</span>
<span class="co">#&gt; 8    24.96320, 60.18242          7        unit 2.780866</span>
<span class="co">#&gt; 9    24.94567, 60.19430          8        unit 2.764076</span>
<span class="co">#&gt; 10   24.87776, 60.21116          9        unit 2.764076</span>
<span class="co">#&gt; 11   25.14068, 60.20865         10        unit 2.277178</span>
<span class="co">#&gt; 12   25.06807, 60.20983         11        unit 2.266940</span>
<span class="co">#&gt; 13   25.05760, 60.17415         12        unit 2.253031</span></code></pre></div>
<p>The function parameter <code>only</code> is not as straightforward as filtering and subsetting columns in a data.frame / tibble, as it requires a valid type prefix in the beginning, in this case “unit”. Other valid input in this case would be “service_node”, “service” and “address”, but during testing unit-prefix seemed to work best. When in doubt, checking the <a href="https://dev.hel.fi/apis/service-map-backend-api/">original documentation</a> may help.</p>
<p>Function <code><a href="../reference/get_linkedevents.html">get_linkedevents()</a></code> retrieves regional event data from the new <a href="http://api.hel.fi/linkedevents/v1/">Linked Events API</a>.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Search for current events</span>
<span class="va">events</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_linkedevents.html">get_linkedevents</a></span><span class="op">(</span>query<span class="op">=</span><span class="st">"event"</span><span class="op">)</span>
<span class="co"># Get names for the first 20 results</span>
<span class="va">events</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">name</span><span class="op">$</span><span class="va">fi</span>
<span class="co">#&gt;  [1] "Luetaan yhdessä ryhmä"             "Etätapahtuma: Opitaan kielioppia!"</span>
<span class="co">#&gt;  [3] "Luetaan yhdessä ryhmä"             "Etätapahtuma: Opitaan kielioppia!"</span>
<span class="co">#&gt;  [5] "Luetaan yhdessä ryhmä"             "Etätapahtuma: Opitaan kielioppia!"</span>
<span class="co">#&gt;  [7] "Luetaan yhdessä ryhmä"             "Etätapahtuma: Opitaan kielioppia!"</span>
<span class="co">#&gt;  [9] "Luetaan yhdessä ryhmä"             "Etätapahtuma: Opitaan kielioppia!"</span>
<span class="co">#&gt; [11] "Luetaan yhdessä ryhmä"             "Etätapahtuma: Opitaan kielioppia!"</span>
<span class="co">#&gt; [13] "Luetaan yhdessä ryhmä"             "Etätapahtuma: Opitaan kielioppia!"</span>
<span class="co">#&gt; [15] "Luetaan yhdessä ryhmä"             "Etätapahtuma: Opitaan kielioppia!"</span>
<span class="co">#&gt; [17] "Luetaan yhdessä ryhmä"             "Etätapahtuma: Opitaan kielioppia!"</span>
<span class="co">#&gt; [19] "Luetaan yhdessä ryhmä"             "Etätapahtuma: Opitaan kielioppia!"</span>
<span class="co"># See what kind of data is given for events</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">events</span><span class="op">$</span><span class="va">data</span><span class="op">)</span>
<span class="co">#&gt;  [1] "id"                          "location"                   </span>
<span class="co">#&gt;  [3] "keywords"                    "super_event"                </span>
<span class="co">#&gt;  [5] "event_status"                "type_id"                    </span>
<span class="co">#&gt;  [7] "external_links"              "offers"                     </span>
<span class="co">#&gt;  [9] "data_source"                 "publisher"                  </span>
<span class="co">#&gt; [11] "sub_events"                  "images"                     </span>
<span class="co">#&gt; [13] "videos"                      "in_language"                </span>
<span class="co">#&gt; [15] "audience"                    "created_time"               </span>
<span class="co">#&gt; [17] "last_modified_time"          "date_published"             </span>
<span class="co">#&gt; [19] "start_time"                  "end_time"                   </span>
<span class="co">#&gt; [21] "custom_data"                 "audience_min_age"           </span>
<span class="co">#&gt; [23] "audience_max_age"            "super_event_type"           </span>
<span class="co">#&gt; [25] "deleted"                     "maximum_attendee_capacity"  </span>
<span class="co">#&gt; [27] "remaining_attendee_capacity" "minimum_attendee_capacity"  </span>
<span class="co">#&gt; [29] "enrolment_start_time"        "enrolment_end_time"         </span>
<span class="co">#&gt; [31] "local"                       "search_vector_fi"           </span>
<span class="co">#&gt; [33] "search_vector_en"            "search_vector_sv"           </span>
<span class="co">#&gt; [35] "replaced_by"                 "provider"                   </span>
<span class="co">#&gt; [37] "info_url"                    "provider_contact_info"      </span>
<span class="co">#&gt; [39] "short_description"           "description"                </span>
<span class="co">#&gt; [41] "location_extra_info"         "name"                       </span>
<span class="co">#&gt; [43] "@id"                         "@context"                   </span>
<span class="co">#&gt; [45] "@type"</span></code></pre></div>
</div>
<div id="helsinki-region-district-maps" class="section level2">
<h2 class="hasAnchor">
<a href="#helsinki-region-district-maps" class="anchor"></a>Helsinki region district maps</h2>
<p>Helsinki region geographic data can be accessed from a WFS API by using the get_city_map() function. Data is available for all 4 cities in the capital region: Helsinki, Espoo, Vantaa and Kauniainen.</p>
<p>Administrative divisions can be accessed on 3 distinct levels: “suuralue”, “tilastoalue” and “pienalue”. Literal, completely unofficial translations for these could be “grand district”, “statistical area” and “(minor) district”. The naming convention of these levels is sometimes confusing even in Finnish documents and different names can vary by city and time.</p>
<p>The main takeaway is that “suuralue” is the highest-level division and “pienalue” is the most granular level of division. “Tilastoalue” is somewhere between these two. These are the names to be used even if the city of interest might not use them in their Finnish or English website.</p>
<p>As promised earlier in <a href="#api-access">API Access</a>, the following example gives an idea on how to visualize waterpost locations (and, of course, other types of spatial data as well) on capital region map.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">helsinki</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_city_map.html">get_city_map</a></span><span class="op">(</span>city <span class="op">=</span> <span class="st">"helsinki"</span>, level <span class="op">=</span> <span class="st">"suuralue"</span><span class="op">)</span>
<span class="va">espoo</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_city_map.html">get_city_map</a></span><span class="op">(</span>city <span class="op">=</span> <span class="st">"espoo"</span>, level <span class="op">=</span> <span class="st">"suuralue"</span><span class="op">)</span>
<span class="va">vantaa</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_city_map.html">get_city_map</a></span><span class="op">(</span>city <span class="op">=</span> <span class="st">"vantaa"</span>, level <span class="op">=</span> <span class="st">"suuralue"</span><span class="op">)</span>
<span class="va">kauniainen</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_city_map.html">get_city_map</a></span><span class="op">(</span>city <span class="op">=</span> <span class="st">"kauniainen"</span>, level <span class="op">=</span> <span class="st">"suuralue"</span><span class="op">)</span>

<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">helsinki</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">espoo</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">vantaa</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">kauniainen</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">waterposts</span><span class="op">)</span></code></pre></div>
<p><img src="helsinki_tutorial_files/figure-html/maps1-1.png" width="525"></p>
<p>In addition, it is possible to download “aanestysalue” (voting district) divisions for the city of Helsinki. Currently this data is not available for other cities and it must be accessed from other sources.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/">sf</a></span><span class="op">)</span>
<span class="va">map</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_city_map.html">get_city_map</a></span><span class="op">(</span>city <span class="op">=</span> <span class="st">"helsinki"</span>, level <span class="op">=</span> <span class="st">"suuralue"</span><span class="op">)</span>
<span class="fu"><a href="https://r-spatial.github.io/sf/reference/plot.html">plot</a></span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html">st_geometry</a></span><span class="op">(</span><span class="va">map</span><span class="op">)</span><span class="op">)</span>

<span class="va">voting_district</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_city_map.html">get_city_map</a></span><span class="op">(</span>city <span class="op">=</span> <span class="st">"helsinki"</span>, level <span class="op">=</span> <span class="st">"aanestysalue"</span><span class="op">)</span>
<span class="fu"><a href="https://r-spatial.github.io/sf/reference/plot.html">plot</a></span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html">st_geometry</a></span><span class="op">(</span><span class="va">voting_district</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>For other cities than Helsinki voting areas (and older district maps that shouldn’t be too different from current maps) can be viewed from the legacy dataset with <code><a href="https://rdrr.io/r/utils/data.html">data(aluejakokartat)</a></code>. The data included with the packaged is available as both spatial object (<code>sp</code>) and data frame (<code>df</code>). This data was preprocessed with the now-defunct gisfin-package. The current, actively maintained version of gisfin is called <a href="https://github.com/rOpenGov/geofi">geofi</a>).</p>
<p>The included aluejakokartat-dataset can also be used if there is for some reason a temporary internet outage in your area and you just need to draw maps on Finnish capital region. It will be bundled with the package for the time being.</p>
<p>Below are the contents of <code><a href="https://rdrr.io/r/utils/data.html">data(aluejakokartat)</a></code>:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Load aluejakokartat and study contents</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">aluejakokartat</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">aluejakokartat</span>, m<span class="op">=</span><span class="fl">2</span><span class="op">)</span>
<span class="co">#&gt; List of 2</span>
<span class="co">#&gt;  $ sp:List of 8</span>
<span class="co">#&gt;   ..$ kunta            :Formal class 'SpatialPolygonsDataFrame' [package "sp"] with 5 slots</span>
<span class="co">#&gt;   ..$ pienalue         :Formal class 'SpatialPolygonsDataFrame' [package "sp"] with 5 slots</span>
<span class="co">#&gt;   ..$ pienalue_piste   :Formal class 'SpatialPointsDataFrame' [package "sp"] with 5 slots</span>
<span class="co">#&gt;   ..$ suuralue         :Formal class 'SpatialPolygonsDataFrame' [package "sp"] with 5 slots</span>
<span class="co">#&gt;   ..$ suuralue_piste   :Formal class 'SpatialPointsDataFrame' [package "sp"] with 5 slots</span>
<span class="co">#&gt;   ..$ tilastoalue      :Formal class 'SpatialPolygonsDataFrame' [package "sp"] with 5 slots</span>
<span class="co">#&gt;   ..$ tilastoalue_piste:Formal class 'SpatialPointsDataFrame' [package "sp"] with 5 slots</span>
<span class="co">#&gt;   ..$ aanestysalue     :Formal class 'SpatialPolygonsDataFrame' [package "sp"] with 5 slots</span>
<span class="co">#&gt;  $ df:List of 8</span>
<span class="co">#&gt;   ..$ kunta            :'data.frame':    1664 obs. of  7 variables:</span>
<span class="co">#&gt;   ..$ pienalue         :'data.frame':    33594 obs. of  7 variables:</span>
<span class="co">#&gt;   ..$ pienalue_piste   :'data.frame':    295 obs. of  3 variables:</span>
<span class="co">#&gt;   ..$ suuralue         :'data.frame':    6873 obs. of  7 variables:</span>
<span class="co">#&gt;   ..$ suuralue_piste   :'data.frame':    23 obs. of  3 variables:</span>
<span class="co">#&gt;   ..$ tilastoalue      :'data.frame':    17279 obs. of  7 variables:</span>
<span class="co">#&gt;   ..$ tilastoalue_piste:'data.frame':    125 obs. of  3 variables:</span>
<span class="co">#&gt;   ..$ aanestysalue     :'data.frame':    35349 obs. of  11 variables:</span></code></pre></div>
</div>
<div id="helsinki-region-infoshare-statistics-api" class="section level2">
<h2 class="hasAnchor">
<a href="#helsinki-region-infoshare-statistics-api" class="anchor"></a>Helsinki Region Infoshare statistics API</h2>
<p>Function <code><a href="../reference/get_hri_stats.html">get_hri_stats()</a></code> retrieves data from the <a href="http://dev.hel.fi/stats/">Helsinki Region Infoshare statistics API</a>.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Retrieve list of available data</span>
<span class="va">stats_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_hri_stats.html">get_hri_stats</a></span><span class="op">(</span>query<span class="op">=</span><span class="st">""</span><span class="op">)</span>
<span class="co"># Show first results</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">stats_list</span><span class="op">)</span>
<span class="co">#&gt;                                      NULL </span>
<span class="co">#&gt;             "L113_viheralue_kaupunginosa" </span>
<span class="co">#&gt;                                      NULL </span>
<span class="co">#&gt;                      "L32_yksikkopaastot" </span>
<span class="co">#&gt;                                      NULL </span>
<span class="co">#&gt;                   "J1_loppusijoitettavat" </span>
<span class="co">#&gt;                                      NULL </span>
<span class="co">#&gt;                    "I13_maailman_paastot" </span>
<span class="co">#&gt;                                      NULL </span>
<span class="co">#&gt;       "J13_sekajatteen_maara_kiinteistot" </span>
<span class="co">#&gt;  Helsingin väestö äidinkielen mukaan 1.1. </span>
<span class="co">#&gt; "aluesarjat_a03s_hki_vakiluku_aidinkieli"</span></code></pre></div>
<p>Specify a dataset to retrieve. In this specific example we will download the first item on the stats_list object. The output is a three-dimensional array.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Retrieve a specific dataset</span>
<span class="va">stats_res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_hri_stats.html">get_hri_stats</a></span><span class="op">(</span>query<span class="op">=</span><span class="va">stats_list</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>
<span class="co"># Show the structure of the results</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">stats_res</span><span class="op">)</span>
<span class="co">#&gt;  num [1:6, 1:34] 11606 5607 2.07 0.65 0.15 ...</span>
<span class="co">#&gt;  - attr(*, "dimnames")=List of 2</span>
<span class="co">#&gt;   ..$ muuttuja  : chr [1:6] "Asukkaita" "Asukastiheys (hlö/km2)" "Maapinta-ala (km2)" "Viheralueiden pinta-ala (km2)" ...</span>
<span class="co">#&gt;   ..$ peruspiiri: chr [1:34] "Vironniemi" "Ullanlinna" "Kampinmalmi" "Taka-Töölö" ...</span></code></pre></div>
</div>
<div id="licensing-and-citations" class="section level2">
<h2 class="hasAnchor">
<a href="#licensing-and-citations" class="anchor"></a>Licensing and Citations</h2>
<div id="citing-the-data" class="section level3">
<h3 class="hasAnchor">
<a href="#citing-the-data" class="anchor"></a>Citing the data</h3>
<p>See <code>help()</code> to get citation information for each function and related data sources.</p>
<p>If no such information is explicitly stated, see data provider’s website for more information.</p>
</div>
<div id="citing-the-r-package" class="section level3">
<h3 class="hasAnchor">
<a href="#citing-the-r-package" class="anchor"></a>Citing the R package</h3>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="kw">citation</span>(<span class="st">"helsinki"</span>)</span>
<span id="cb19-2"><a href="#cb19-2"></a></span>
<span id="cb19-3"><a href="#cb19-3"></a>Kindly cite the helsinki R package as follows<span class="op">:</span></span>
<span id="cb19-4"><a href="#cb19-4"></a></span>
<span id="cb19-5"><a href="#cb19-5"></a><span class="st">  </span>(C) Juuso Parkkinen, Joona Lehtomaki, Pyry Kantanen and Leo Lahti</span>
<span id="cb19-6"><a href="#cb19-6"></a>  <span class="dv">2014</span><span class="fl">-2021.</span> helsinki R package</span>
<span id="cb19-7"><a href="#cb19-7"></a></span>
<span id="cb19-8"><a href="#cb19-8"></a>A BibTeX entry <span class="cf">for</span> LaTeX users is</span>
<span id="cb19-9"><a href="#cb19-9"></a></span>
<span id="cb19-10"><a href="#cb19-10"></a>  <span class="op">@</span>Misc{,</span>
<span id="cb19-11"><a href="#cb19-11"></a>    title =<span class="st"> </span>{helsinki R package},</span>
<span id="cb19-12"><a href="#cb19-12"></a>    author =<span class="st"> </span>{Juuso Parkkinen and Joona Lehtomaki and Pyry Kantanen and Leo Lahti},</span>
<span id="cb19-13"><a href="#cb19-13"></a>    year =<span class="st"> </span>{<span class="dv">2014-2021</span>},</span>
<span id="cb19-14"><a href="#cb19-14"></a>  }</span>
<span id="cb19-15"><a href="#cb19-15"></a></span>
<span id="cb19-16"><a href="#cb19-16"></a>Many thanks <span class="cf">for</span> all contributors<span class="op">!</span><span class="st"> </span>For more info, see<span class="op">:</span></span>
<span id="cb19-17"><a href="#cb19-17"></a>https<span class="op">:</span><span class="er">//</span>github.com<span class="op">/</span>rOpenGov<span class="op">/</span>helsinki</span></code></pre></div>
</div>
<div id="session-info" class="section level3">
<h3 class="hasAnchor">
<a href="#session-info" class="anchor"></a>Session info</h3>
<p>This vignette was created with</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/sessionInfo.html">sessionInfo</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; R version 4.1.1 (2021-08-10)</span>
<span class="co">#&gt; Platform: x86_64-apple-darwin17.0 (64-bit)</span>
<span class="co">#&gt; Running under: macOS Catalina 10.15.7</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Matrix products: default</span>
<span class="co">#&gt; BLAS:   /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRblas.0.dylib</span>
<span class="co">#&gt; LAPACK: /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRlapack.dylib</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; locale:</span>
<span class="co">#&gt; [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; attached base packages:</span>
<span class="co">#&gt; [1] stats     graphics  grDevices utils     datasets  methods   base     </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; other attached packages:</span>
<span class="co">#&gt; [1] sp_1.4-5       ggplot2_3.3.5  helsinki_1.0.2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; loaded via a namespace (and not attached):</span>
<span class="co">#&gt;  [1] tidyselect_1.1.1   xfun_0.25          purrr_0.3.4        sf_1.0-2          </span>
<span class="co">#&gt;  [5] lattice_0.20-44    colorspace_2.0-2   vctrs_0.3.8        generics_0.1.0    </span>
<span class="co">#&gt;  [9] htmltools_0.5.1.1  yaml_2.2.1         utf8_1.2.2         rlang_0.4.11      </span>
<span class="co">#&gt; [13] e1071_1.7-8        pkgdown_1.6.1      pillar_1.6.2       glue_1.4.2        </span>
<span class="co">#&gt; [17] withr_2.4.2        DBI_1.1.1          lifecycle_1.0.0    stringr_1.4.0     </span>
<span class="co">#&gt; [21] munsell_0.5.0      gtable_0.3.0       ragg_1.1.3         memoise_2.0.0     </span>
<span class="co">#&gt; [25] evaluate_0.14      labeling_0.4.2     knitr_1.33         fastmap_1.1.0     </span>
<span class="co">#&gt; [29] curl_4.3.2         class_7.3-19       fansi_0.5.0        highr_0.9         </span>
<span class="co">#&gt; [33] Rcpp_1.0.7         KernSmooth_2.23-20 scales_1.1.1       classInt_0.4-3    </span>
<span class="co">#&gt; [37] cachem_1.0.5       desc_1.3.0         jsonlite_1.7.2     farver_2.1.0      </span>
<span class="co">#&gt; [41] systemfonts_1.0.2  fs_1.5.0           textshaping_0.3.5  digest_0.6.27     </span>
<span class="co">#&gt; [45] stringi_1.7.3      dplyr_1.0.7        rprojroot_2.0.2    grid_4.1.1        </span>
<span class="co">#&gt; [49] tools_4.1.1        magrittr_2.0.1     proxy_0.4-26       tibble_3.1.3      </span>
<span class="co">#&gt; [53] crayon_1.4.1       httpcache_1.2.0    pkgconfig_2.0.3    ellipsis_0.3.2    </span>
<span class="co">#&gt; [57] xml2_1.3.2         rmarkdown_2.10     httr_1.4.2         R6_2.5.1          </span>
<span class="co">#&gt; [61] units_0.7-2        compiler_4.1.1</span></code></pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Juuso Parkkinen, Joona Lehtomaki, Pyry Kantanen, Leo Lahti.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
