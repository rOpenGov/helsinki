<!--
%\VignetteEngine{knitr}
%\VignetteIndexEntry{An R Markdown Vignette made with knitr}
-->


helsinki - tutorial
===========

This R package provides tools to access open data from the Helsinki region in Finland
as part of the [rOpenGov](http://ropengov.github.io) project.

For contact information and source code, see the [github page](https://github.com/rOpenGov/helsinki)

## Available data sources

The following data sources are currently available:
* [Helsinki region district maps](#aluejakokartat) (Helsingin seudun aluejakokartat)
 * Datasets: *Aluejakokartat (kunta, pien-, suur-, tilastoalueet), äänestysaluejako*
 * Source: [Helsingin kaupungin Kiinteistövirasto (HKK)](http://ptp.hel.fi/avoindata/)
* [Helsinki Real Estate Department](#hkk) (HKK:n avointa dataa)
 * Datasets: *Helsingin osoiteluettelo, Seudullinen osoiteluettelo*
 * Source: [Helsingin kaupungin Kiinteistövirasto (HKK)](http://ptp.hel.fi/avoindata/)
 * Note! More spatial data from HKK availabe in the [fingis](https://github.com/rOpenGov/fingis) package, see [examples](https://github.com/rOpenGov/fingis/blob/master/vignettes/fingis_tutorial.md#hel-spatial)
* [Helsinki region environmental services](#hsy) (HSY:n avointa dataa)
 * Datasets: *Väestötietoruudukko, rakennustietoruudukko, SeutuRAMAVA*
 * Source: [Helsingin seudun ympäristöpalvelut, HSY](http://www.hsy.fi/seututieto/kaupunki/paikkatiedot/Sivut/Avoindata.aspx)
* [Helsinki Service Map](#servicemap)
 * APIs: *[Helsingin seudun Palvelukartta](http://www.hel.fi/palvelukartta/Default.aspx?language=fi&city=91), [Omakaupunki](http://api.omakaupunki.fi/)*
 

## Installation

Release version for general users:

```{r install, eval=FALSE}
install.packages("helsinki")
```

Development version for developers:

```{r install2, eval=FALSE}
install.packages("devtools")
library(devtools)
install_github("helsinki", "ropengov")
```

Load package.

```{r load}
library(helsinki)
```

## <a name="aluejakokartat"></a>Helsinki region district maps

Helsinki region district maps (Helsingin seudun aluejakokartat) from [Helsingin kaupungin Kiinteistövirasto (HKK)](http://ptp.hel.fi/avoindata/). These are preprocessed in the [fingis](https://github.com/rOpenGov/fingis) package, see examples in the [fingis tutorial](https://github.com/rOpenGov/fingis/blob/master/vignettes/fingis_tutorial.md). The data are available in the helsinki package with `data(aluejakokartat)`.

```{r aluejako_data, message=FALSE}
# data(aluejakokartat)
```


## <a name="hkk"></a>Helsinki Real Estate Department

Open data from [Helsingin kaupungin kiinteistövirasto, (HKK)](http://kartta.hel.fi/avoindata/index.html).

### Helsinki address information

```{r hkk-addressH, message=FALSE}
dat <- get_HKK_address_data("Helsingin osoiteluettelo")
head(dat)
```

```{r hkk-addressS, message=FALSE}
dat <- get_HKK_address_data("Seudullinen osoiteluettelo")
head(dat)
```


## <a name="hsy"></a> Helsinki region environmental services

Data from [Helsingin seudun ympäristöpalvelut (HSY)](http://www.hsy.fi/seututieto/kaupunki/paikkatiedot/Sivut/Avoindata.aspx).

### Population grid (väestöteitoruudukko)

Download population information from [HSY database](http://www.hsy.fi/seututieto/kaupunki/paikkatiedot/Sivut/Avoindata.aspx) (C) 2013 HSY, and inspect the data manually. Some rarely populated grids are censored with '99' to guarantee privacy.

```{r hsy-example, fig.width=8, fig.height=8, message=FALSE}
sp <- get_HSY_data("Vaestotietoruudukko")
df <- as.data.frame(sp)   
head(df)
```


### Helsinki building information (rakennustietoruudukko)

Information of buildings in Helsinki region. Data obtained from (C)
HSY 2013. Grid-level (500mx500m) information on building counts
(lukumaara), built area (kerrosala), usage (kayttotarkoitus), region
efficiency (aluetehokkuus).

```{r hsy-examplerak, message=FALSE}
sp <- get_HSY_data("Rakennustietoruudukko", 2013)  
df <- as.data.frame(sp)   
head(df)
```

### Helsinki building area capacity

Building area capacity per municipal region (kaupunginosittain summattu tieto rakennusmaavarannosta). Data obtained from (C) HSY 2013. 

```{r hsy-exampleramava, message=FALSE}
sp <- get_HSY_data("SeutuRAMAVA_kosa")  
df <- as.data.frame(sp)   
head(df)
```


### Other Helsinki region spatial data

[HSY website](http://www.hsy.fi/seututieto/kaupunki/paikkatiedot/Sivut/Avoindata.aspx) has more data that will be included in the helsinki package later.

## <a name="servicemap"></a>Helsinki Service Map

Retrieve data from [Palvelukartta](http://www.hel.fi/palvelukartta/Default.aspx?language=fi&city=91) [API](http://www.hel.fi/palvelukarttaws/rest/ver2_en.html).

```{r servicemap, message=FALSE}
# Get servicetree
pk.servicetree <- get_ServiceMap_data("servicetree")
# Get id for parks
str(pk.servicetree[[1]]$children[[7]]$children[[2]])
# Get parks data
parks.data <- get_ServiceMap_data("unit", service=25664)
# Check what data is given for the first park
str(parks.data[[1]])
```


### Citation

**Citing the data:** See `help()` to get citation information for each data source individually.

**Citing the R package:**

```{r citation, comment=NA}
citation("helsinki")
```

### Session info


This vignette was created with

```{r sessioninfo, message=FALSE, warning=FALSE}
sessionInfo()
```

