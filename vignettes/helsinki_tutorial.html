<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>helsinki - tutorial</title>

<script type="text/javascript">
window.onload = function() {
  var imgs = document.getElementsByTagName('img'), i, img;
  for (i = 0; i < imgs.length; i++) {
    img = imgs[i];
    // center an image if it is the only element of its parent
    if (img.parentElement.childElementCount === 1)
      img.parentElement.style.textAlign = 'center';
  }
};
</script>

<!-- Styles for R syntax highlighter -->
<style type="text/css">
   pre .operator,
   pre .paren {
     color: rgb(104, 118, 135)
   }

   pre .literal {
     color: #990073
   }

   pre .number {
     color: #099;
   }

   pre .comment {
     color: #998;
     font-style: italic
   }

   pre .keyword {
     color: #900;
     font-weight: bold
   }

   pre .identifier {
     color: rgb(0, 0, 0);
   }

   pre .string {
     color: #d14;
   }
</style>

<!-- R syntax highlighter -->
<script type="text/javascript">
var hljs=new function(){function m(p){return p.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function f(r,q,p){return RegExp(q,"m"+(r.cI?"i":"")+(p?"g":""))}function b(r){for(var p=0;p<r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName=="CODE"){return q}if(!(q.nodeType==3&&q.nodeValue.match(/\s+/))){break}}}function h(t,s){var p="";for(var r=0;r<t.childNodes.length;r++){if(t.childNodes[r].nodeType==3){var q=t.childNodes[r].nodeValue;if(s){q=q.replace(/\n/g,"")}p+=q}else{if(t.childNodes[r].nodeName=="BR"){p+="\n"}else{p+=h(t.childNodes[r])}}}if(/MSIE [678]/.test(navigator.userAgent)){p=p.replace(/\r/g,"\n")}return p}function a(s){var r=s.className.split(/\s+/);r=r.concat(s.parentNode.className.split(/\s+/));for(var q=0;q<r.length;q++){var p=r[q].replace(/^language-/,"");if(e[p]){return p}}}function c(q){var p=[];(function(s,t){for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName=="BR"){t+=1}else{if(s.childNodes[r].nodeType==1){p.push({event:"start",offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);p.push({event:"stop",offset:t,node:s.childNodes[r]})}}}}return t})(q,0);return p}function k(y,w,x){var q=0;var z="";var s=[];function u(){if(y.length&&w.length){if(y[0].offset!=w[0].offset){return(y[0].offset<w[0].offset)?y:w}else{return w[0].event=="start"?y:w}}else{return y.length?y:w}}function t(D){var A="<"+D.nodeName.toLowerCase();for(var B=0;B<D.attributes.length;B++){var C=D.attributes[B];A+=" "+C.nodeName.toLowerCase();if(C.value!==undefined&&C.value!==false&&C.value!==null){A+='="'+m(C.value)+'"'}}return A+">"}while(y.length||w.length){var v=u().splice(0,1)[0];z+=m(x.substr(q,v.offset-q));q=v.offset;if(v.event=="start"){z+=t(v.node);s.push(v.node)}else{if(v.event=="stop"){var p,r=s.length;do{r--;p=s[r];z+=("</"+p.nodeName.toLowerCase()+">")}while(p!=v.node);s.splice(r,1);while(r<s.length){z+=t(s[r]);r++}}}}return z+m(x.substr(q))}function j(){function q(x,y,v){if(x.compiled){return}var u;var s=[];if(x.k){x.lR=f(y,x.l||hljs.IR,true);for(var w in x.k){if(!x.k.hasOwnProperty(w)){continue}if(x.k[w] instanceof Object){u=x.k[w]}else{u=x.k;w="keyword"}for(var r in u){if(!u.hasOwnProperty(r)){continue}x.k[r]=[w,u[r]];s.push(r)}}}if(!v){if(x.bWK){x.b="\\b("+s.join("|")+")\\s"}x.bR=f(y,x.b?x.b:"\\B|\\b");if(!x.e&&!x.eW){x.e="\\B|\\b"}if(x.e){x.eR=f(y,x.e)}}if(x.i){x.iR=f(y,x.i)}if(x.r===undefined){x.r=1}if(!x.c){x.c=[]}x.compiled=true;for(var t=0;t<x.c.length;t++){if(x.c[t]=="self"){x.c[t]=x}q(x.c[t],y,false)}if(x.starts){q(x.starts,y,false)}}for(var p in e){if(!e.hasOwnProperty(p)){continue}q(e[p].dM,e[p],true)}}function d(B,C){if(!j.called){j();j.called=true}function q(r,M){for(var L=0;L<M.c.length;L++){if((M.c[L].bR.exec(r)||[null])[0]==r){return M.c[L]}}}function v(L,r){if(D[L].e&&D[L].eR.test(r)){return 1}if(D[L].eW){var M=v(L-1,r);return M?M+1:0}return 0}function w(r,L){return L.i&&L.iR.test(r)}function K(N,O){var M=[];for(var L=0;L<N.c.length;L++){M.push(N.c[L].b)}var r=D.length-1;do{if(D[r].e){M.push(D[r].e)}r--}while(D[r+1].eW);if(N.i){M.push(N.i)}return f(O,M.join("|"),true)}function p(M,L){var N=D[D.length-1];if(!N.t){N.t=K(N,E)}N.t.lastIndex=L;var r=N.t.exec(M);return r?[M.substr(L,r.index-L),r[0],false]:[M.substr(L),"",true]}function z(N,r){var L=E.cI?r[0].toLowerCase():r[0];var M=N.k[L];if(M&&M instanceof Array){return M}return false}function F(L,P){L=m(L);if(!P.k){return L}var r="";var O=0;P.lR.lastIndex=0;var M=P.lR.exec(L);while(M){r+=L.substr(O,M.index-O);var N=z(P,M);if(N){x+=N[1];r+='<span class="'+N[0]+'">'+M[0]+"</span>"}else{r+=M[0]}O=P.lR.lastIndex;M=P.lR.exec(L)}return r+L.substr(O,L.length-O)}function J(L,M){if(M.sL&&e[M.sL]){var r=d(M.sL,L);x+=r.keyword_count;return r.value}else{return F(L,M)}}function I(M,r){var L=M.cN?'<span class="'+M.cN+'">':"";if(M.rB){y+=L;M.buffer=""}else{if(M.eB){y+=m(r)+L;M.buffer=""}else{y+=L;M.buffer=r}}D.push(M);A+=M.r}function G(N,M,Q){var R=D[D.length-1];if(Q){y+=J(R.buffer+N,R);return false}var P=q(M,R);if(P){y+=J(R.buffer+N,R);I(P,M);return P.rB}var L=v(D.length-1,M);if(L){var O=R.cN?"</span>":"";if(R.rE){y+=J(R.buffer+N,R)+O}else{if(R.eE){y+=J(R.buffer+N,R)+O+m(M)}else{y+=J(R.buffer+N+M,R)+O}}while(L>1){O=D[D.length-2].cN?"</span>":"";y+=O;L--;D.length--}var r=D[D.length-1];D.length--;D[D.length-1].buffer="";if(r.starts){I(r.starts,"")}return R.rE}if(w(M,R)){throw"Illegal"}}var E=e[B];var D=[E.dM];var A=0;var x=0;var y="";try{var s,u=0;E.dM.buffer="";do{s=p(C,u);var t=G(s[0],s[1],s[2]);u+=s[0].length;if(!t){u+=s[1].length}}while(!s[2]);if(D.length>1){throw"Illegal"}return{r:A,keyword_count:x,value:y}}catch(H){if(H=="Illegal"){return{r:0,keyword_count:0,value:m(C)}}else{throw H}}}function g(t){var p={keyword_count:0,r:0,value:m(t)};var r=p;for(var q in e){if(!e.hasOwnProperty(q)){continue}var s=d(q,t);s.language=q;if(s.keyword_count+s.r>r.keyword_count+r.r){r=s}if(s.keyword_count+s.r>p.keyword_count+p.r){r=p;p=s}}if(r.language){p.second_best=r}return p}function i(r,q,p){if(q){r=r.replace(/^((<[^>]+>|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,"<br>")}return r}function n(t,w,r){var x=h(t,r);var v=a(t);var y,s;if(v){y=d(v,x)}else{return}var q=c(t);if(q.length){s=document.createElement("pre");s.innerHTML=y.value;y.value=k(q,c(s),x)}y.value=i(y.value,w,r);var u=t.className;if(!u.match("(\\s|^)(language-)?"+v+"(\\s|$)")){u=u?(u+" "+v):v}if(/MSIE [678]/.test(navigator.userAgent)&&t.tagName=="CODE"&&t.parentNode.tagName=="PRE"){s=t.parentNode;var p=document.createElement("div");p.innerHTML="<pre><code>"+y.value+"</code></pre>";t=p.firstChild.firstChild;p.firstChild.cN=s.cN;s.parentNode.replaceChild(p.firstChild,s)}else{t.innerHTML=y.value}t.className=u;t.result={language:v,kw:y.keyword_count,re:y.r};if(y.second_best){t.second_best={language:y.second_best.language,kw:y.second_best.keyword_count,re:y.second_best.r}}}function o(){if(o.called){return}o.called=true;var r=document.getElementsByTagName("pre");for(var p=0;p<r.length;p++){var q=b(r[p]);if(q){n(q,hljs.tabReplace)}}}function l(){if(window.addEventListener){window.addEventListener("DOMContentLoaded",o,false);window.addEventListener("load",o,false)}else{if(window.attachEvent){window.attachEvent("onload",o)}else{window.onload=o}}}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=n;this.initHighlighting=o;this.initHighlightingOnLoad=l;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.ER="(?![\\s\\S])";this.BE={b:"\\\\.",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.inherit=function(r,s){var p={};for(var q in r){p[q]=r[q]}if(s){for(var q in s){p[q]=s[q]}}return p}}();hljs.LANGUAGES.cpp=function(){var a={keyword:{"false":1,"int":1,"float":1,"while":1,"private":1,"char":1,"catch":1,"export":1,virtual:1,operator:2,sizeof:2,dynamic_cast:2,typedef:2,const_cast:2,"const":1,struct:1,"for":1,static_cast:2,union:1,namespace:1,unsigned:1,"long":1,"throw":1,"volatile":2,"static":1,"protected":1,bool:1,template:1,mutable:1,"if":1,"public":1,friend:2,"do":1,"return":1,"goto":1,auto:1,"void":2,"enum":1,"else":1,"break":1,"new":1,extern:1,using:1,"true":1,"class":1,asm:1,"case":1,typeid:1,"short":1,reinterpret_cast:2,"default":1,"double":1,register:1,explicit:1,signed:1,typename:1,"try":1,"this":1,"switch":1,"continue":1,wchar_t:1,inline:1,"delete":1,alignof:1,char16_t:1,char32_t:1,constexpr:1,decltype:1,noexcept:1,nullptr:1,static_assert:1,thread_local:1,restrict:1,_Bool:1,complex:1},built_in:{std:1,string:1,cin:1,cout:1,cerr:1,clog:1,stringstream:1,istringstream:1,ostringstream:1,auto_ptr:1,deque:1,list:1,queue:1,stack:1,vector:1,map:1,set:1,bitset:1,multiset:1,multimap:1,unordered_set:1,unordered_map:1,unordered_multiset:1,unordered_multimap:1,array:1,shared_ptr:1}};return{dM:{k:a,i:"</",c:[hljs.CLCM,hljs.CBLCLM,hljs.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},hljs.CNM,{cN:"preprocessor",b:"#",e:"$"},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:a,r:10,c:["self"]}]}}}();hljs.LANGUAGES.r={dM:{c:[hljs.HCM,{cN:"number",b:"\\b0[xX][0-9a-fA-F]+[Li]?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+(?:[eE][+\\-]?\\d*)?L\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+\\.(?!\\d)(?:i\\b)?",e:hljs.IMMEDIATE_RE,r:1},{cN:"number",b:"\\b\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"keyword",b:"(?:tryCatch|library|setGeneric|setGroupGeneric)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\.",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\d+(?![\\w.])",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\b(?:function)",e:hljs.IMMEDIATE_RE,r:2},{cN:"keyword",b:"(?:if|in|break|next|repeat|else|for|return|switch|while|try|stop|warning|require|attach|detach|source|setMethod|setClass)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"literal",b:"(?:NA|NA_integer_|NA_real_|NA_character_|NA_complex_)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"literal",b:"(?:NULL|TRUE|FALSE|T|F|Inf|NaN)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"identifier",b:"[a-zA-Z.][a-zA-Z0-9._]*\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"<\\-(?!\\s*\\d)",e:hljs.IMMEDIATE_RE,r:2},{cN:"operator",b:"\\->|<\\-",e:hljs.IMMEDIATE_RE,r:1},{cN:"operator",b:"%%|~",e:hljs.IMMEDIATE_RE},{cN:"operator",b:">=|<=|==|!=|\\|\\||&&|=|\\+|\\-|\\*|/|\\^|>|<|!|&|\\||\\$|:",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"%",e:"%",i:"\\n",r:1},{cN:"identifier",b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE],r:0},{cN:"string",b:"'",e:"'",c:[hljs.BE],r:0},{cN:"paren",b:"[[({\\])}]",e:hljs.IMMEDIATE_RE,r:0}]}};
hljs.initHighlightingOnLoad();
</script>



<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 13px;
}

body {
  max-width: 800px;
  margin: auto;
  padding: 1em;
  line-height: 20px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 {
   font-size:2.2em;
}

h2 {
   font-size:1.8em;
}

h3 {
   font-size:1.4em;
}

h4 {
   font-size:1.0em;
}

h5 {
   font-size:0.9em;
}

h6 {
   font-size:0.8em;
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre, img {
  max-width: 100%;
}
pre {
  overflow-x: auto;
}
pre code {
   display: block; padding: 0.5em;
}

code {
  font-size: 92%;
  border: 1px solid #ccc;
}

code[class] {
  background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * {
      background: transparent !important;
      color: black !important;
      filter:none !important;
      -ms-filter: none !important;
   }

   body {
      font-size:12pt;
      max-width:100%;
   }

   a, a:visited {
      text-decoration: underline;
   }

   hr {
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote {
      padding-right: 1em;
      page-break-inside: avoid;
   }

   tr, img {
      page-break-inside: avoid;
   }

   img {
      max-width: 100% !important;
   }

   @page :left {
      margin: 15mm 20mm 15mm 10mm;
   }

   @page :right {
      margin: 15mm 10mm 15mm 20mm;
   }

   p, h2, h3 {
      orphans: 3; widows: 3;
   }

   h2, h3 {
      page-break-after: avoid;
   }
}
</style>



</head>

<body>
<!--
%\VignetteEngine{knitr}
%\VignetteIndexEntry{An R Markdown Vignette made with knitr}
-->

<h1>helsinki - tutorial</h1>

<p>This R package provides tools to access open data from the Helsinki region in Finland
as part of the <a href="http://ropengov.github.io">rOpenGov</a> project.</p>

<p>For contact information and source code, see the <a href="https://github.com/rOpenGov/helsinki">github page</a>. </p>

<h2>Available data sources</h2>

<p><a href="#aluejakokartat">Helsinki region district maps</a> (Helsingin seudun aluejakokartat)</p>

<ul>
<li>Aluejakokartat: kunta, pien-, suur-, tilastoalueet (Helsinki region district maps)</li>
<li>Äänestysaluejako: (Helsinki region election district maps)</li>
<li>Source: <a href="http://ptp.hel.fi/avoindata/">Helsingin kaupungin Kiinteistövirasto (HKK)</a></li>
</ul>

<p>Helsinki Real Estate Department (HKK:n avointa dataa)</p>

<ul>
<li>Spatial data from <a href="http://ptp.hel.fi/avoindata/">Helsingin kaupungin Kiinteistövirasto (HKK)</a> availabe in the <a href="https://github.com/rOpenGov/gisfin">gisfin</a> package, see <a href="https://github.com/rOpenGov/gisfin/blob/master/vignettes/gisfin_tutorial.md">gisfin tutorial</a> for examples</li>
</ul>

<p><a href="#hsy">Helsinki region environmental services</a> (HSY:n avointa dataa)</p>

<ul>
<li>Väestötietoruudukko (population grid)</li>
<li>Rakennustietoruudukko (building information grid)</li>
<li>SeutuRAMAVA (building land resource information(?))</li>
<li>Source: <a href="http://www.hsy.fi/seututieto/kaupunki/paikkatiedot/Sivut/Avoindata.aspx">Helsingin seudun ympäristöpalvelut, HSY</a></li>
</ul>

<p><a href="#servicemap">Service and event information</a></p>

<ul>
<li><a href="http://api.hel.fi/servicemap/v1/">Helsinki region Service Map API</a> (Pääkaupunkiseudun Palvelukartta)</li>
<li><a href="http://api.hel.fi/linkedevents/v0.1/">Helsinki Linked Event API</a></li>
</ul>

<p><a href="#hri_stats">Helsinki Region Infoshare statistics API</a></p>

<ul>
<li><a href="http://www.aluesarjat.fi/">Aluesarjat (original source)</a> (regional time series data)</li>
<li>Source: <a href="http://dev.hel.fi/stats/">Helsinki Region Infoshare statistics API</a></li>
</ul>

<p>List of potential data sources to be added to the package can be found <a href="https://github.com/rOpenGov/helsinki/blob/master/vignettes/todo-datasets.md">here</a>.</p>

<h2>Installation</h2>

<p>Release version for general users:</p>

<pre><code class="r">install.packages(&quot;helsinki&quot;)
</code></pre>

<p>Development version for developers:</p>

<pre><code class="r">install.packages(&quot;devtools&quot;)
library(devtools)
install_github(&quot;helsinki&quot;, &quot;ropengov&quot;)
</code></pre>

<p>Load package.</p>

<pre><code class="r">library(helsinki)
</code></pre>

<h2><a name="aluejakokartat"></a>Helsinki region district maps</h2>

<p>Helsinki region district maps (Helsingin seudun aluejakokartat) and election maps (äänestysalueet) from <a href="http://ptp.hel.fi/avoindata/">Helsingin kaupungin Kiinteistövirasto (HKK)</a> are available in the helsinki package with <code>data(aluejakokartat)</code>. The data are available as both spatial object (<code>sp</code>) and data frame (<code>df</code>). These are preprocessed in the <a href="https://github.com/rOpenGov/gisfin">gisfin</a> package, and more examples can be found in the <a href="https://github.com/rOpenGov/gisfin/blob/master/vignettes/gisfin_tutorial.md">gisfin tutorial</a>. </p>

<pre><code class="r"># Load aluejakokartat and study contents
data(aluejakokartat)
str(aluejakokartat, m=2)
</code></pre>

<pre><code>## List of 2
##  $ sp:List of 8
##   ..$ kunta            :Formal class &#39;SpatialPolygonsDataFrame&#39; [package &quot;sp&quot;] with 5 slots
##   ..$ pienalue         :Formal class &#39;SpatialPolygonsDataFrame&#39; [package &quot;sp&quot;] with 5 slots
##   ..$ pienalue_piste   :Formal class &#39;SpatialPointsDataFrame&#39; [package &quot;sp&quot;] with 5 slots
##   ..$ suuralue         :Formal class &#39;SpatialPolygonsDataFrame&#39; [package &quot;sp&quot;] with 5 slots
##   ..$ suuralue_piste   :Formal class &#39;SpatialPointsDataFrame&#39; [package &quot;sp&quot;] with 5 slots
##   ..$ tilastoalue      :Formal class &#39;SpatialPolygonsDataFrame&#39; [package &quot;sp&quot;] with 5 slots
##   ..$ tilastoalue_piste:Formal class &#39;SpatialPointsDataFrame&#39; [package &quot;sp&quot;] with 5 slots
##   ..$ aanestysalue     :Formal class &#39;SpatialPolygonsDataFrame&#39; [package &quot;sp&quot;] with 5 slots
##  $ df:List of 8
##   ..$ kunta            :&#39;data.frame&#39;:    1664 obs. of  7 variables:
##   ..$ pienalue         :&#39;data.frame&#39;:    33594 obs. of  7 variables:
##   ..$ pienalue_piste   :&#39;data.frame&#39;:    295 obs. of  3 variables:
##   ..$ suuralue         :&#39;data.frame&#39;:    6873 obs. of  7 variables:
##   ..$ suuralue_piste   :&#39;data.frame&#39;:    23 obs. of  3 variables:
##   ..$ tilastoalue      :&#39;data.frame&#39;:    17279 obs. of  7 variables:
##   ..$ tilastoalue_piste:&#39;data.frame&#39;:    125 obs. of  3 variables:
##   ..$ aanestysalue     :&#39;data.frame&#39;:    35349 obs. of  11 variables:
</code></pre>

<h2><a name="hsy"></a> Helsinki region environmental services</h2>

<p>Retrieve data from <a href="http://www.hsy.fi/seututieto/kaupunki/paikkatiedot/Sivut/Avoindata.aspx">Helsingin seudun ympäristöpalvelut (HSY)</a> with <code>get_hsy()</code>.</p>

<h3>Population grid</h3>

<p>Population grid (väestötietoruudukko) with 250m x 250m grid size in year 2013 contains the number of people in different age groups. The most rarely populated grids are left out (0-4 persons), and grids with less than 99 persons are censored with &#39;99&#39; to guarantee privacy.</p>

<pre><code class="r">sp.vaesto &lt;- get_hsy(which.data=&quot;Vaestotietoruudukko&quot;, which.year=2013)
head(sp.vaesto@data)
</code></pre>

<pre><code>##   INDEX ASUKKAITA ASVALJYYS IKA0_9 IKA10_19 IKA20_29 IKA30_39 IKA40_49
## 0   688         5        50     99       99       99       99       99
## 1   703         6        42     99       99       99       99       99
## 2   710         7        36     99       99       99       99       99
## 3   711         7        64     99       99       99       99       99
## 4   715        16        28     99       99       99       99       99
## 5   864        10        65     99       99       99       99       99
##   IKA50_59 IKA60_69 IKA70_79 IKA_YLI80
## 0       99       99       99        99
## 1       99       99       99        99
## 2       99       99       99        99
## 3       99       99       99        99
## 4       99       99       99        99
## 5       99       99       99        99
</code></pre>

<h3>Helsinki building information</h3>

<p>Building information grid (rakennustietoruudukko) in Helsinki region on grid-level (500m x 500m): building counts (lukumäärä), built area (kerrosala), usage (käyttötarkoitus), and region
efficiency (aluetehokkuus).</p>

<pre><code class="r">sp.rakennus &lt;- get_hsy(which.data=&quot;Rakennustietoruudukko&quot;, which.year=2013)  
head(sp.rakennus@data)
</code></pre>

<pre><code>##   INDEX RAKLKM RAKLKM_AS RAKLKM_MUU KERALA_YHT KERALA_AS KERALA_MUU
## 0   688      3         2          1        324       282         42
## 1   691      3         2          1         90        80         10
## 2   692      9         4          5        286       206         80
## 3   702      2         2          0        262       262          0
## 4   703      3         2          1        373       326         47
## 5   710      6         2          4        370       302         68
##   KATAKER1  KATAKER2  KATAKER3 SUMMA1    SUMMA2    SUMMA3 ALUETEHOK
## 0       11       941 999999999    282        42 999999999  0.005288
## 1       41       941 999999999     80        10 999999999  0.001440
## 2       41       941       931    206        47        33  0.007304
## 3       11 999999999 999999999    262 999999999 999999999  0.004192
## 4       11       941 999999999    326        47 999999999  0.005968
## 5       11       931       941    302        39        29  0.005920
##   KATAKER1.description    KATAKER2.description    KATAKER3.description
## 0  Yhden asunnon talot       Talousrakennukset Puuttuvan tiedon merkki
## 1   Vapaa-ajan asunnot       Talousrakennukset Puuttuvan tiedon merkki
## 2   Vapaa-ajan asunnot       Talousrakennukset        Saunarakennukset
## 3  Yhden asunnon talot Puuttuvan tiedon merkki Puuttuvan tiedon merkki
## 4  Yhden asunnon talot       Talousrakennukset Puuttuvan tiedon merkki
## 5  Yhden asunnon talot        Saunarakennukset       Talousrakennukset
</code></pre>

<h3>Helsinki building area capacity</h3>

<p>Building area capacity per municipal region (kaupunginosittain summattua tietoa rakennusmaavarannosta). Plot with number of buildlings with <code>spplot()</code>.</p>

<pre><code class="r">sp.ramava &lt;- get_hsy(which.data=&quot;SeutuRAMAVA_tila&quot;, which.year=2013)  
head(sp.ramava@data)
</code></pre>

<pre><code>##   KUNTA    KOKOTUN TILANRO            NIMI RAKLKM YKSLKM RAKEOIKEUS
## 0   049 0491013000     013 KILO-KARAKALLIO   2245    915    1871538
## 1   235 2351003000     003            &lt;NA&gt;    326    214     218052
## 2   049 0495051000     051 KANTA-KAUKLAHTI    952    396     321345
## 3   092 0926081000     081           KORSO   1511    965     519438
## 4   092 0927096000     096     ITÄ-HAKKILA    994    687     278428
## 5   049 0491014000     014     LAAKSOLAHTI   3749   1998     807561
##   KARA_YHT KARA_AS KARA_MUU RAKERA_YHT RAKERA_AS RAKERA_MUU VARA_YHT
## 0  1225666  607609   618057      40653     22814      17839   646923
## 1   171017  103585    67432       7411      6206       1205    47053
## 2   195116  144274    50842      41179     34061       7118    98379
## 3   419911  334123    85788       3963      3355        608    98692
## 4   193025  127626    65399       2067      1720        347    77453
## 5   600636  547178    53458      33286     29987       3299   174097
##   VARA_AS VARA_AP VARA_AK VARA_MUU VANHINRAKE UUSINRAKE OMLAJI_1
## 0   93878   68728   25150   553045       1900      2013       11
## 1   42653   40606    2047     4400       1907      2013       11
## 2   76698   72958    3740    21681       1900      2013        3
## 3   59018   54779    4239    39674       1890      2013        9
## 4   22339   22339       0    55114       1900      2013        9
## 5  135184  130252    4932    38913       1870      2013        9
##                        OMLAJI_1S OMLAJI_2                      OMLAJI_2S
## 0 Asunto-osakeyhtiö tai asunto-o       11 Asunto-osakeyhtiö tai asunto-o
## 1 Asunto-osakeyhtiö tai asunto-o       11 Asunto-osakeyhtiö tai asunto-o
## 2                          Espoo        3                          Espoo
## 3         Muu yksityinen henkilö        9         Muu yksityinen henkilö
## 4         Muu yksityinen henkilö        9         Muu yksityinen henkilö
## 5         Muu yksityinen henkilö        9         Muu yksityinen henkilö
##   OMLAJI_3                      OMLAJI_3S
## 0       11 Asunto-osakeyhtiö tai asunto-o
## 1       11 Asunto-osakeyhtiö tai asunto-o
## 2        3                          Espoo
## 3        9         Muu yksityinen henkilö
## 4        9         Muu yksityinen henkilö
## 5        9         Muu yksityinen henkilö
</code></pre>

<pre><code class="r"># Values with less than five units are given as 999999999, set those to zero
sp.ramava@data[sp.ramava@data==999999999] &lt;- 0
# Plot number of buildings for each region
spplot(sp.ramava, zcol=&quot;RAKLKM&quot;, main=&quot;Number of buildings in each &#39;tilastoalue&#39;&quot;, col.regions=colorRampPalette(c(&#39;blue&#39;, &#39;gray80&#39;, &#39;red&#39;))(100))
</code></pre>

<p><img src="figure/hsy_ramava-1.png" alt="plot of chunk hsy_ramava"/> </p>

<h2><a name="servicemap"></a>Service and event information</h2>

<p>Function <code>get_servicemap()</code> retrieves regional service data from the new <a href="http://api.hel.fi/servicemap/v1/">Service Map API</a>, that contains data from the <a href="http://dev.hel.fi/servicemap/">Service Map</a>.</p>

<pre><code class="r"># Search for &quot;puisto&quot; (park) (specify q=&quot;query&quot;)
search.puisto &lt;- get_servicemap(query=&quot;search&quot;, q=&quot;puisto&quot;)
# Study results
str(search.puisto, m=1)
</code></pre>

<pre><code>## List of 4
##  $ count   : num 1662
##  $ next    : chr &quot;http://api.hel.fi/servicemap/v1/search/?q=puisto&amp;page=2&quot;
##  $ previous: NULL
##  $ results :List of 20
</code></pre>

<pre><code class="r"># A lot of results found (count &gt; 1000)
# Get names for the first 20 results
sapply(search.puisto$results, function(x) x$name$fi)
</code></pre>

<pre><code>##  [1] &quot;Mankkaan asukaspuisto&quot;              
##  [2] &quot;Tapiolan asukaspuisto&quot;              
##  [3] &quot;Olarin asukaspuisto&quot;                
##  [4] &quot;Perkkaan asukaspuisto&quot;              
##  [5] &quot;Hurtigin puisto&quot;                    
##  [6] &quot;Kaupungintalon puisto&quot;              
##  [7] &quot;Matinkylän asukaspuisto&quot;            
##  [8] &quot;Kylätalo Palttinan asukaspuisto&quot;    
##  [9] &quot;Leppävaaran asukaspuisto&quot;           
## [10] &quot;Karakallion asukaspuisto&quot;           
## [11] &quot;Suvelan asukaspuisto&quot;               
## [12] &quot;Asematien puisto&quot;                   
## [13] &quot;Viherkallion asukaspuisto&quot;          
## [14] &quot;Stenbergin puisto&quot;                  
## [15] &quot;Kasavuoren puisto&quot;                  
## [16] &quot;Nurmilinnunpuisto&quot;                  
## [17] &quot;Itärannan puisto/ Otsonlahdenpuisto&quot;
## [18] &quot;Lehtikaskenpuisto&quot;                  
## [19] &quot;Alberganesplanadin puisto&quot;          
## [20] &quot;Kotitontunpuisto&quot;
</code></pre>

<pre><code class="r"># See what data is given for one service
names(search.puisto$results[[1]])
</code></pre>

<pre><code>##  [1] &quot;connections&quot;               &quot;accessibility_properties&quot; 
##  [3] &quot;id&quot;                        &quot;data_source_url&quot;          
##  [5] &quot;name&quot;                      &quot;description&quot;              
##  [7] &quot;provider_type&quot;             &quot;department&quot;               
##  [9] &quot;organization&quot;              &quot;street_address&quot;           
## [11] &quot;address_zip&quot;               &quot;phone&quot;                    
## [13] &quot;email&quot;                     &quot;www_url&quot;                  
## [15] &quot;address_postal_full&quot;       &quot;municipality&quot;             
## [17] &quot;picture_url&quot;               &quot;picture_caption&quot;          
## [19] &quot;origin_last_modified_time&quot; &quot;root_services&quot;            
## [21] &quot;services&quot;                  &quot;divisions&quot;                
## [23] &quot;keywords&quot;                  &quot;location&quot;                 
## [25] &quot;object_type&quot;               &quot;score&quot;
</code></pre>

<pre><code class="r"># More results could be retrieved by specifying &#39;page=2&#39; etc.
</code></pre>

<p>Function <code>get_linkedevents()</code> retrieves regional event data from the new <a href="http://api.hel.fi/linkedevents/v0.1/">Linked Events API</a>.</p>

<pre><code class="r"># Searh for current events
events &lt;- get_linkedevents(query=&quot;event&quot;)
# Get names for the first 20 results
sapply(events$data, function(x) x$name$fi)
</code></pre>

<pre><code>##  [1] &quot;Ladykillers - Sarjahurmaajat&quot;      
##  [2] &quot;Ladykillers - Sarjahurmaajat&quot;      
##  [3] &quot;Ladykillers - Sarjahurmaajat&quot;      
##  [4] &quot;Melontaa Pitkäjärvellä&quot;            
##  [5] &quot;Ladykillers - Sarjahurmaajat&quot;      
##  [6] &quot;Ladykillers - Sarjahurmaajat&quot;      
##  [7] &quot;Lumikuningatar&quot;                    
##  [8] &quot;Kuningas kuolee&quot;                   
##  [9] &quot;Helsingin Urkukesä, päivämusiikkia&quot;
## [10] &quot;Helsingin Urkukesä, päivämusiikkia&quot;
## [11] &quot;Helsingin Urkukesä, päivämusiikkia&quot;
## [12] &quot;Helsingin Urkukesä, päivämusiikkia&quot;
## [13] &quot;Helsingin Urkukesä, päivämusiikkia&quot;
## [14] &quot;Helsingin Urkukesä, päivämusiikkia&quot;
## [15] &quot;Helsingin Urkukesä, päivämusiikkia&quot;
## [16] &quot;Helsingin Urkukesä, päivämusiikkia&quot;
## [17] &quot;Helsingin Urkukesä, päivämusiikkia&quot;
## [18] &quot;Helsingin Urkukesä, päivämusiikkia&quot;
## [19] &quot;Jukka Puotila Show&quot;                
## [20] &quot;Kuningas kuolee&quot;
</code></pre>

<pre><code class="r"># See what data is given for the first event
names(events$data[[1]])
</code></pre>

<pre><code>##  [1] &quot;location&quot;            &quot;keywords&quot;            &quot;super_event&quot;        
##  [4] &quot;event_status&quot;        &quot;external_links&quot;      &quot;offers&quot;             
##  [7] &quot;sub_events&quot;          &quot;id&quot;                  &quot;custom_data&quot;        
## [10] &quot;data_source&quot;         &quot;image&quot;               &quot;origin_id&quot;          
## [13] &quot;created_time&quot;        &quot;last_modified_time&quot;  &quot;last_modified_by&quot;   
## [16] &quot;date_published&quot;      &quot;publisher&quot;           &quot;start_time&quot;         
## [19] &quot;end_time&quot;            &quot;audience&quot;            &quot;short_description&quot;  
## [22] &quot;name&quot;                &quot;headline&quot;            &quot;location_extra_info&quot;
## [25] &quot;description&quot;         &quot;secondary_headline&quot;  &quot;info_url&quot;           
## [28] &quot;provider&quot;            &quot;@id&quot;                 &quot;@type&quot;
</code></pre>

<h2><a name="hri_stats"></a> Helsinki Region Infoshare statistics API</h2>

<p>Function <code>get_hri_stats()</code> retrieves data from the <a href="http://dev.hel.fi/stats/">Helsinki Region Infoshare statistics API</a>.</p>

<pre><code class="r"># Retrieve list of available data
stats.list &lt;- get_hri_stats(query=&quot;&quot;)
# Show first results
head(stats.list)
</code></pre>

<pre><code>##                                         Helsingin väestö äidinkielen mukaan 1.1. 
##                                        &quot;aluesarjat_a03s_hki_vakiluku_aidinkieli&quot; 
## Työpaikat Helsingissä (alueella työssäkäyvät) toimialan (TOL 1988) mukaan 31.12. 
##                                            &quot;aluesarjat_a07s_hki_tyopaikat_tol88&quot; 
##               Vantaalla asuva työllinen työvoima sukupuolen ja iän mukaan 31.12. 
##                                         &quot;aluesarjat_c01s_van_tyovoima_sukupuoli&quot; 
##             Espoon lapsiperheet lasten määrän mukaan (0-17-vuotiaat lapset) 1.1. 
##                                        &quot;aluesarjat_b03s_esp_lapsiperheet_alle18&quot; 
##                                             Väestö iän ja sukupuolen mukaan 1.1. 
##                                      &quot;aluesarjat_hginseutu_va_vr01_vakiluku_ika&quot; 
##                     Helsingin asuntotuotanto rahoitusmuodon ja huoneluvun mukaan 
##                                     &quot;aluesarjat_a03hki_astuot_rahoitus_huonelkm&quot;
</code></pre>

<p>Specify a dataset to retrieve. The output is currently a three-dimensional array.</p>

<pre><code class="r"># Retrieve a specific dataset
stats.res &lt;- get_hri_stats(query=stats.list[1])
# Show the structure of the results
str(stats.res)
</code></pre>

<pre><code>##  num [1:23, 1:4, 1:197] 497526 501518 508659 515765 525031 ...
##  - attr(*, &quot;dimnames&quot;)=List of 3
##   ..$ vuosi     : chr [1:23] &quot;1992&quot; &quot;1993&quot; &quot;1994&quot; &quot;1995&quot; ...
##   ..$ aidinkieli: chr [1:4] &quot;Kaikki äidinkielet&quot; &quot;Suomi ja saame&quot; &quot;Ruotsi&quot; &quot;Muu kieli&quot;
##   ..$ alue      : chr [1:197] &quot;091 Helsinki&quot; &quot;091 1 Eteläinen suurpiiri&quot; &quot;091 101 Vironniemen peruspiiri&quot; &quot;091 10 Kruununhaka&quot; ...
</code></pre>

<p>The implementation will be updated and more examples will be added in the near future.</p>

<h3>Citation</h3>

<p><strong>Citing the data:</strong> See <code>help()</code> to get citation information for each data source individually.</p>

<p><strong>Citing the R package:</strong></p>

<pre><code class="r">citation(&quot;helsinki&quot;)
</code></pre>

<pre><code>
Kindly cite the helsinki R package as follows:

  (C) Juuso Parkkinen, Leo Lahti and Joona Lehtomaki 2014.
  helsinki R package

A BibTeX entry for LaTeX users is

  @Misc{,
    title = {helsinki R package},
    author = {Juuso Parkkinen and Leo Lahti and Joona Lehtomaki},
    year = {2014},
  }

Many thanks for all contributors! For more info, see:
https://github.com/rOpenGov/helsinki
</code></pre>

<h3>Session info</h3>

<p>This vignette was created with</p>

<pre><code class="r">sessionInfo()
</code></pre>

<pre><code>## R version 3.1.2 (2014-10-31)
## Platform: x86_64-apple-darwin13.4.0 (64-bit)
## 
## locale:
## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
## [1] helsinki_0.9.23 RCurl_1.95-4.3  bitops_1.0-6    maptools_0.8-30
## [5] sp_1.0-15       knitr_1.8      
## 
## loaded via a namespace (and not attached):
## [1] evaluate_0.5.5  foreign_0.8-61  formatR_1.0     grid_3.1.2     
## [5] lattice_0.20-29 rjson_0.2.14    stringr_0.6.2   tools_3.1.2
</code></pre>

</body>

</html>
