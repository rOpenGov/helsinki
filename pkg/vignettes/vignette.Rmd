<!--
%\VignetteEngine{knitr}
%\VignetteIndexEntry{An R Markdown Vignette made with knitr}
-->

Helsinki  R tools
===========

This is an [rOpenGov](http://ropengov.github.com/helsinki) R package
providing tools for open Helsinki data.


### Installation

Release version for general users:

```{r install, eval=FALSE}
install.packages("helsinki")
library(helsinki)
```

Development version for developers:

```{r install2, eval=FALSE}
install.packages("devtools")
library(devtools)
install_github("helsinki", "ropengov")
library(helsinki)
```

Further installation and development instructions at the [home
page](http://ropengov.github.com/helsinki).

## Helsinki Region Infoshare (HRI)

### Municipality maps (Aluejakokartat)

Get [Helsinki Region Infoshare](http://www.hri.fi) (HRI) municipality maps:

```{r hri-1, warning=FALSE, message=FALSE}
# Load library
#  http://ropengov.github.com/helsinki/
library(helsinki)

# Get the maps
pienalue <- GetHRIaluejakokartat()

# Inspect the data
head(pienalue$pienalue.df)
```


## Helsinki region environmental services (Helsingin seudun ympäristöpalvelut HSY)


### Population grid

Download population information from [HSY database](http://www.hsy.fi/seututieto/kaupunki/paikkatiedot/Sivut/Avoindata.aspx) ((C) 2011 HSY) and visualize on the Helsinki map. For data documentation, see [HSY website](http://www.hsy.fi/seututieto/Documents/Paikkatiedot/Tietokuvaukset_kaikki.pdf).


```{r hsy-example, fig.width=8, fig.height=8, message=FALSE}
# http://ropengov.github.com/helsinki
library(helsinki)

# Get population grid (Vaestoruudukko) 
sp <- GetHSY("Vaestoruudukko")  

# Define limits of the color scale
at <- c(seq(0, 2000, 250), Inf) 

# Visualize population grid
q <- PlotShape(sp, "ASUKKAITA", type = "oneway", at = at, ncol = length(at)) 
```

The following data sets are available (specified in the GetHSY argument):

 * Vaestotietoruudukko: population size, density, and age structure per grid

 * Rakennustietoruudukko: Grid-level (500mx500m) information on
   building counts (lukumaara), area (kerrosala), usage
   (kayttotarkoitus), region efficiency (aluetehokkuus).

 * seutuRAMAVA: building area capacity per municipality region
   (kaupunginosittain summattu tieto rakennusmaavarannosta)



Inspect data manually. Some rarely populated grids are censored with
'99' to guarantee privacy.

```{r hsy-example2, message=FALSE}
df <- as.data.frame(sp)   
head(df)
```


### Further HSY data

[HSY website](http://www.hsy.fi/seututieto/kaupunki/paikkatiedot/Sivut/Avoindata.aspx) has data for 2010-2011. More is coming, add later and allow temporal analysis.

For further usage examples, see
[Louhos-blog](http://louhos.wordpress.com) and
[takomo](https://github.com/louhos/takomo/tree/master/Helsinki).


## Helsinki Real Estate Department (Helsingin kaupungin kiinteistövirasto, HKK)

Retrieve [HKK](http://kartta.hel.fi/avoindata/index.html) data sets.

### Election districts (Aanestysaluejako)

Aanestysaluejako: data set includes the elections districts for the cities of the capital region (Helsinki, Espoo, Kauniainen and Vantaa) in MapInfo-format. CRS is Finland KKJ2 (EPSG: 2392). All feature datasets have different schemas with varying amount of information. Additionally in HKK database there is an Excel file (Aanestyaluekoodit.xls) with information for all cities, such as voting district names and codes.

```{r hkk-example2, message=FALSE}
sp <- GetHKK("Aanestysaluejako")
```


### Statistics districts (Tilastoalue)

```{r hkk-tilastoalue, message=FALSE}
id <- "tilastoalue"
res <- GetDistrictBoundariesHelsinki(id); 
sp <- res$shape; 
df <- res$data
head(df)
PlotShape(sp, "Name")
```

### Municipalities (Kunta)

```{r hkk-kunta, message=FALSE}
id <- "kunta"
res <- GetDistrictBoundariesHelsinki(id); 
sp <- res$shape; 
df <- res$data
head(df)
PlotShape(sp, "Name")
```

### Major districts (Suuralue)

```{r hkk-suuralue, message=FALSE}
id <- "suuralue"
res <- GetDistrictBoundariesHelsinki(id); 
sp <- res$shape; 
df <- res$data
head(df)
PlotShape(sp, "Name")
```

### Minor districts (Pienalue)

```{r hkk-pienalue, message=FALSE}
id <- "pienalue"
res <- GetDistrictBoundariesHelsinki(id); 
sp <- res$shape; 
df <- res$data
head(df)
PlotShape(sp, "Name")
```



### Licensing and Citations

This work can be freely used, modified and distributed under the
[Two-clause FreeBSD
license](http://en.wikipedia.org/wiki/BSD\_licenses). Cite Helsinki R
package and and the appropriate data provider, including a url
link. Kindly cite the R package as 'Leo Lahti, Juuso Parkkinen ja
Joona Lehtomäki (2013). helsinki R package. URL:
http://ropengov.github.io/helsinki'.


### Session info


This vignette was created with

```{r sessioninfo, message=FALSE, warning=FALSE}
sessionInfo()
```

