<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Helsinki open data R tools • helsinki</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Helsinki open data R tools">
<meta property="og:description" content="helsinki">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">helsinki</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.9.40</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/helsinki_tutorial.html">Helsinki open data R tools</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ropengov/helsinki/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="helsinki_tutorial_files/header-attrs-2.7/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Helsinki open data R tools</h1>
            
            <h4 data-toc-skip class="date">2021-05-04</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ropengov/helsinki/blob/master/vignettes/helsinki_tutorial.Rmd" class="external-link"><code>vignettes/helsinki_tutorial.Rmd</code></a></small>
      <div class="hidden name"><code>helsinki_tutorial.Rmd</code></div>

    </div>

    
    
<div id="helsinki---tutorial" class="section level1">
<h1 class="hasAnchor">
<a href="#helsinki---tutorial" class="anchor" aria-hidden="true"></a>helsinki - tutorial</h1>
<p>This R package provides tools to access open data from the Helsinki region in Finland as part of the <a href="http://ropengov.org" class="external-link">rOpenGov</a> project.</p>
<p>For contact information and source code, see the project’s <a href="https://github.com/rOpenGov/helsinki" class="external-link">GitHub page</a>.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor" aria-hidden="true"></a>Installation</h2>
<p>Release version for most users:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"helsinki"</span><span class="op">)</span></code></pre></div>
<p>Development version for developers and other interested parties:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://remotes.r-lib.org" class="external-link">remotes</a></span><span class="op">)</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"ropengov/helsinki"</span><span class="op">)</span></code></pre></div>
<p>Load the package.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rOpenGov/helsinki" class="external-link">helsinki</a></span><span class="op">)</span></code></pre></div>
</div>
<div id="helsinki-region-district-maps" class="section level2">
<h2 class="hasAnchor">
<a href="#helsinki-region-district-maps" class="anchor" aria-hidden="true"></a>Helsinki region district maps</h2>
<p>Helsinki region geographic data can be accessed from a WFS API by using the get_city_map() function. Data is available for all 4 cities in the capital region: Helsinki, Espoo, Vantaa and Kauniainen.</p>
<p>Administrative divisions can be accessed on 3 distinct levels: “suuralue”, “tilastoalue” and “pienalue”. Literal, completely unofficial translations for these could be “grand district”, “statistical area” and “(minor) district”. The naming convention of these levels is sometimes confusing even in Finnish documents and different names can vary by city and time.</p>
<p>The main takeaway is that “suuralue” is the highest-level division and “pienalue” is the most granular level of division. “Tilastoalue” is between these two.</p>
<p>In addition, it is possible to download “aanestysalue” (voting district) divisions for the city of Helsinki. Currently this data is not available for other cities and it must be accessed from other sources.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span>
<span class="va">map</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_city_map.html">get_city_map</a></span><span class="op">(</span>city <span class="op">=</span> <span class="st">"helsinki"</span>, level <span class="op">=</span> <span class="st">"suuralue"</span><span class="op">)</span>
<span class="fu"><a href="https://r-spatial.github.io/sf/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">map</span><span class="op">)</span><span class="op">)</span>

<span class="va">voting_district</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_city_map.html">get_city_map</a></span><span class="op">(</span>city <span class="op">=</span> <span class="st">"helsinki"</span>, level <span class="op">=</span> <span class="st">"aanestysalue"</span><span class="op">)</span>
<span class="fu"><a href="https://r-spatial.github.io/sf/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">voting_district</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>For other cities than Helsinki voting areas (and other district maps) can be viewed from the legacy dataset with <code>data(aluejakokartat)</code>. The data included with the packaged is available as both spatial object (<code>sp</code>) and data frame (<code>df</code>). This data was preprocessed with the now-defunct gisfin-package. The current, actively maintained version of gisfin is called <a href="https://github.com/rOpenGov/geofi" class="external-link">geofi</a>).</p>
<p>The inclusion of this legacy dataset in this package may change in the future.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Load aluejakokartat and study contents</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">aluejakokartat</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">aluejakokartat</span>, m<span class="op">=</span><span class="fl">2</span><span class="op">)</span>
<span class="co">#&gt; List of 2</span>
<span class="co">#&gt;  $ sp:List of 8</span>
<span class="co">#&gt;   ..$ kunta            :Formal class 'SpatialPolygonsDataFrame' [package "sp"] with 5 slots</span>
<span class="co">#&gt;   ..$ pienalue         :Formal class 'SpatialPolygonsDataFrame' [package "sp"] with 5 slots</span>
<span class="co">#&gt;   ..$ pienalue_piste   :Formal class 'SpatialPointsDataFrame' [package "sp"] with 5 slots</span>
<span class="co">#&gt;   ..$ suuralue         :Formal class 'SpatialPolygonsDataFrame' [package "sp"] with 5 slots</span>
<span class="co">#&gt;   ..$ suuralue_piste   :Formal class 'SpatialPointsDataFrame' [package "sp"] with 5 slots</span>
<span class="co">#&gt;   ..$ tilastoalue      :Formal class 'SpatialPolygonsDataFrame' [package "sp"] with 5 slots</span>
<span class="co">#&gt;   ..$ tilastoalue_piste:Formal class 'SpatialPointsDataFrame' [package "sp"] with 5 slots</span>
<span class="co">#&gt;   ..$ aanestysalue     :Formal class 'SpatialPolygonsDataFrame' [package "sp"] with 5 slots</span>
<span class="co">#&gt;  $ df:List of 8</span>
<span class="co">#&gt;   ..$ kunta            :'data.frame':    1664 obs. of  7 variables:</span>
<span class="co">#&gt;   ..$ pienalue         :'data.frame':    33594 obs. of  7 variables:</span>
<span class="co">#&gt;   ..$ pienalue_piste   :'data.frame':    295 obs. of  3 variables:</span>
<span class="co">#&gt;   ..$ suuralue         :'data.frame':    6873 obs. of  7 variables:</span>
<span class="co">#&gt;   ..$ suuralue_piste   :'data.frame':    23 obs. of  3 variables:</span>
<span class="co">#&gt;   ..$ tilastoalue      :'data.frame':    17279 obs. of  7 variables:</span>
<span class="co">#&gt;   ..$ tilastoalue_piste:'data.frame':    125 obs. of  3 variables:</span>
<span class="co">#&gt;   ..$ aanestysalue     :'data.frame':    35349 obs. of  11 variables:</span></code></pre></div>
</div>
<div id="service-and-event-information" class="section level2">
<h2 class="hasAnchor">
<a href="#service-and-event-information" class="anchor" aria-hidden="true"></a>Service and event information</h2>
<p>Function <code><a href="../reference/get_servicemap.html">get_servicemap()</a></code> retrieves regional service data from the new <a href="http://api.hel.fi/servicemap/v2/" class="external-link">Service Map API</a>, that contains data from the <a href="http://dev.hel.fi/servicemap/" class="external-link">Service Map</a>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Search for "puisto" (park) (specify q="query")</span>
<span class="va">search_puisto</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_servicemap.html">get_servicemap</a></span><span class="op">(</span>query<span class="op">=</span><span class="st">"search"</span>, q<span class="op">=</span><span class="st">"puisto"</span><span class="op">)</span>
<span class="co"># Study results: 47 variables in the data frame</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">search_puisto</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>
<span class="co">#&gt; List of 4</span>
<span class="co">#&gt;  $ count   : int 2088</span>
<span class="co">#&gt;  $ next    : chr "https://api.hel.fi/servicemap/v2/search/?page=2&amp;q=puisto"</span>
<span class="co">#&gt;  $ previous: NULL</span>
<span class="co">#&gt;  $ results :'data.frame':    20 obs. of  47 variables:</span></code></pre></div>
<p>We can see that this search returns a large number of results, over 2000. The results are returned as pages, where each page has 20 results by default. By giving no additional search parameters, we get 20 results from the first page of search results.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Get names for the first 20 results</span>
<span class="va">search_puisto</span><span class="op">$</span><span class="va">results</span><span class="op">$</span><span class="va">name</span><span class="op">$</span><span class="va">fi</span>
<span class="co">#&gt;  [1] "Sinebrychoffin puiston yleisövessa"                                </span>
<span class="co">#&gt;  [2] "Sibeliuksen puiston yleisövessa"                                   </span>
<span class="co">#&gt;  [3] "Töölönlahden puisto / Leikkipaikka"                                </span>
<span class="co">#&gt;  [4] "Esplanadin puiston WLAN-tukiasema"                                 </span>
<span class="co">#&gt;  [5] "Hesperian puiston yleisövessa"                                     </span>
<span class="co">#&gt;  [6] "Topeliuksen puiston yleisövessa"                                   </span>
<span class="co">#&gt;  [7] "Sibeliuksen puiston yleisövessa"                                   </span>
<span class="co">#&gt;  [8] "Pysäköintilippuautomaatti 334, Castreninkatu, puisto, korttimaksu" </span>
<span class="co">#&gt;  [9] "Pysäköintilippuautomaatti 132, Merimiehenkatu, puisto, korttimaksu"</span>
<span class="co">#&gt; [10] "Pysäköintilippuautomaatti 88, Pengerkatu, puisto, kolikkomaksu"    </span>
<span class="co">#&gt; [11] "Shakkilauta, Von Glanin puisto"                                    </span>
<span class="co">#&gt; [12] "Matti Heleniuksen puiston yleisövessa"                             </span>
<span class="co">#&gt; [13] "Shakkilauta, Katri Valan puisto"                                   </span>
<span class="co">#&gt; [14] "Tove Janssonin puiston yleisövessa"                                </span>
<span class="co">#&gt; [15] "Ala-Malmin puisto"                                                 </span>
<span class="co">#&gt; [16] "Pyhän Birgitan puisto"                                             </span>
<span class="co">#&gt; [17] "Everstinpuisto"                                                    </span>
<span class="co">#&gt; [18] "Kirkkojärvenpuisto"                                                </span>
<span class="co">#&gt; [19] "Lehtikaskenpuisto"                                                 </span>
<span class="co">#&gt; [20] "Leppäviidanpuisto"</span>

<span class="co"># See what kind of data is given for services</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">search_puisto</span><span class="op">$</span><span class="va">results</span><span class="op">)</span>
<span class="co">#&gt;  [1] "id"                              "connections"                    </span>
<span class="co">#&gt;  [3] "entrances"                       "accessibility_properties"       </span>
<span class="co">#&gt;  [5] "identifiers"                     "department"                     </span>
<span class="co">#&gt;  [7] "root_department"                 "provider_type"                  </span>
<span class="co">#&gt;  [9] "organizer_type"                  "contract_type"                  </span>
<span class="co">#&gt; [11] "is_active"                       "deleted_at"                     </span>
<span class="co">#&gt; [13] "organizer_name"                  "organizer_business_id"          </span>
<span class="co">#&gt; [15] "picture_url"                     "picture_entrance_url"           </span>
<span class="co">#&gt; [17] "streetview_entrance_url"         "description"                    </span>
<span class="co">#&gt; [19] "short_description"               "name"                           </span>
<span class="co">#&gt; [21] "street_address"                  "www"                            </span>
<span class="co">#&gt; [23] "address_postal_full"             "call_charge_info"               </span>
<span class="co">#&gt; [25] "picture_caption"                 "phone"                          </span>
<span class="co">#&gt; [27] "fax"                             "email"                          </span>
<span class="co">#&gt; [29] "accessibility_phone"             "accessibility_email"            </span>
<span class="co">#&gt; [31] "accessibility_www"               "created_time"                   </span>
<span class="co">#&gt; [33] "address_zip"                     "data_source"                    </span>
<span class="co">#&gt; [35] "extensions"                      "last_modified_time"             </span>
<span class="co">#&gt; [37] "accessibility_viewpoints"        "root_service_nodes"             </span>
<span class="co">#&gt; [39] "municipality"                    "service_nodes"                  </span>
<span class="co">#&gt; [41] "services"                        "keywords"                       </span>
<span class="co">#&gt; [43] "location"                        "accessibility_shortcoming_count"</span>
<span class="co">#&gt; [45] "sort_index"                      "object_type"                    </span>
<span class="co">#&gt; [47] "score"</span></code></pre></div>
<p>More results could be retrieved and viewed by giving additional search parameters.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">search_puisto</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_servicemap.html">get_servicemap</a></span><span class="op">(</span>query<span class="op">=</span><span class="st">"search"</span>, q<span class="op">=</span><span class="st">"puisto"</span>, page_size <span class="op">=</span> <span class="fl">30</span>, page <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>
<span class="va">search_puisto</span><span class="op">$</span><span class="va">results</span><span class="op">$</span><span class="va">name</span><span class="op">$</span><span class="va">fi</span>
<span class="co">#&gt;  [1] "Kaupungintalon puisto"                             </span>
<span class="co">#&gt;  [2] "Ankkuripohjanpuisto"                               </span>
<span class="co">#&gt;  [3] "Kuttulammenpuisto"                                 </span>
<span class="co">#&gt;  [4] "Rinkelipuisto"                                     </span>
<span class="co">#&gt;  [5] "Alli Tryggin puiston opaskoira-aitaus"             </span>
<span class="co">#&gt;  [6] "Hurtigin puisto"                                   </span>
<span class="co">#&gt;  [7] "Nurmilinnunpuisto"                                 </span>
<span class="co">#&gt;  [8] "Ruusutorpanpuisto"                                 </span>
<span class="co">#&gt;  [9] "Tynnyripuisto"                                     </span>
<span class="co">#&gt; [10] "Olarin asukaspuisto"                               </span>
<span class="co">#&gt; [11] "Perkkaan asukaspuisto"                             </span>
<span class="co">#&gt; [12] "Asematien leikkipuisto"                            </span>
<span class="co">#&gt; [13] "Stenbergin puisto"                                 </span>
<span class="co">#&gt; [14] "Leppävaaran asukaspuisto"                          </span>
<span class="co">#&gt; [15] "Matinkylän asukaspuisto"                           </span>
<span class="co">#&gt; [16] "Karakallion asukaspuisto"                          </span>
<span class="co">#&gt; [17] "Suvelan asukaspuisto"                              </span>
<span class="co">#&gt; [18] "Kasavuoren puisto"                                 </span>
<span class="co">#&gt; [19] "Veijarivuoren puiston talviuintipaikka (Humaus ry)"</span>
<span class="co">#&gt; [20] "Viherkallion asukaspuisto"                         </span>
<span class="co">#&gt; [21] "Kylätalo Palttinan asukaspuisto"                   </span>
<span class="co">#&gt; [22] "Mankkaan asukaspuisto"                             </span>
<span class="co">#&gt; [23] "Tapiolan asukaspuisto"                             </span>
<span class="co">#&gt; [24] "Pohjankulman puisto"                               </span>
<span class="co">#&gt; [25] "Suvelan puisto"                                    </span>
<span class="co">#&gt; [26] "Alberganesplanadin puisto"                         </span>
<span class="co">#&gt; [27] "Parkvillanpihan puisto"                            </span>
<span class="co">#&gt; [28] "Träskändan kartanopuisto"                          </span>
<span class="co">#&gt; [29] "Laivatorin puisto"                                 </span>
<span class="co">#&gt; [30] "Rantaraitin puisto"</span></code></pre></div>
<p>As we could see from above example, the returned data frame had 47 observations. At full width this output can be messy to handle. One option would be to turn it into a tibble, the other to limit the extent of the query at the start. This can be done with only parameter:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Search for padel-related services in Helsinki</span>
<span class="va">search_padel</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_servicemap.html">get_servicemap</a></span><span class="op">(</span>query<span class="op">=</span><span class="st">"search"</span>, input<span class="op">=</span><span class="st">"padel"</span>, only<span class="op">=</span><span class="st">"unit.name, unit.location.coordinates, unit.street_address"</span>, municipality<span class="op">=</span><span class="st">"helsinki"</span><span class="op">)</span>
<span class="va">search_padel</span><span class="op">$</span><span class="va">results</span>
<span class="co">#&gt;       id                                    name.fi</span>
<span class="co">#&gt; 1  45413         PadelCenter Helsinki / Padelkentät</span>
<span class="co">#&gt; 2  59998               Padel Helsinki / Padelkentät</span>
<span class="co">#&gt; 3  63925                          Padel Messukeskus</span>
<span class="co">#&gt; 4  63926                          Padel Bille Beino</span>
<span class="co">#&gt; 5  63927               Padel Arena Center Myllypuro</span>
<span class="co">#&gt; 6  57222       Padel Club Viikinranta / Padelkenttä</span>
<span class="co">#&gt; 7  57221           ProPADEL Sörnäinen / Padelkenttä</span>
<span class="co">#&gt; 8  62776                    Talihalli / Padelkenttä</span>
<span class="co">#&gt; 9  42296                 Smash Center / Padelkenttä</span>
<span class="co">#&gt; 10 62904 Laajasalon Palloiluhallit Oy / Padelkenttä</span>
<span class="co">#&gt;                                     name.sv           street_address.fi</span>
<span class="co">#&gt; 1     PadelCenter Helsingfors / Padelplaner          Hernesaarenranta 1</span>
<span class="co">#&gt; 2                                      &lt;NA&gt;           Lahnalahdentie 11</span>
<span class="co">#&gt; 3                                      &lt;NA&gt;                 Messukeskus</span>
<span class="co">#&gt; 4                                      &lt;NA&gt;               Traverssikuja</span>
<span class="co">#&gt; 5                                      &lt;NA&gt;                Arena Center</span>
<span class="co">#&gt; 6                                      &lt;NA&gt;               Jokisuuntie 5</span>
<span class="co">#&gt; 7               ProPadel Sörnäs / Padelplan Sörnäisten rantapromenadi 1</span>
<span class="co">#&gt; 8                     Talihalli / Padelplan           Huopalahdentie 28</span>
<span class="co">#&gt; 9                  Smash Center / Padelplan                Varikkotie 4</span>
<span class="co">#&gt; 10 Laajasalon Palloiluhallit Oy / Padelplan           Sarvastonkaari 23</span>
<span class="co">#&gt;          street_address.sv           street_address.en location.type</span>
<span class="co">#&gt; 1       Ärtholmsstranden 1          Hernesaarenranta 1         Point</span>
<span class="co">#&gt; 2         Braxviksvägen 11           Lahnalahdentie 11         Point</span>
<span class="co">#&gt; 3              Messukeskus                 Messukeskus         Point</span>
<span class="co">#&gt; 4            Traverssikuja               Traverssikuja         Point</span>
<span class="co">#&gt; 5             Arena Center                Arena Center         Point</span>
<span class="co">#&gt; 6            Åminnevägen 5               Jokisuuntie 5         Point</span>
<span class="co">#&gt; 7  Sörnäs strandpromenad 1 Sörnäisten rantapromenadi 1         Point</span>
<span class="co">#&gt; 8          Hoplaksvägen 28           Huopalahdentie 28         Point</span>
<span class="co">#&gt; 9              Depåvägen 4                Varikkotie 4         Point</span>
<span class="co">#&gt; 10           Fladabågen 23           Sarvastonkaari 23         Point</span>
<span class="co">#&gt;    location.coordinates sort_index object_type    score</span>
<span class="co">#&gt; 1    24.93146, 60.15325          0        unit 7.931016</span>
<span class="co">#&gt; 2    24.86652, 60.16435          1        unit 7.418678</span>
<span class="co">#&gt; 3    24.93602, 60.20486          2        unit 7.418678</span>
<span class="co">#&gt; 4    24.94567, 60.19430          3        unit 7.417733</span>
<span class="co">#&gt; 5    25.07979, 60.22095          4        unit 7.072420</span>
<span class="co">#&gt; 6    24.98746, 60.21826          5        unit 6.646549</span>
<span class="co">#&gt; 7    24.96320, 60.18242          6        unit 2.783303</span>
<span class="co">#&gt; 8    24.87776, 60.21116          7        unit 2.782344</span>
<span class="co">#&gt; 9    25.06807, 60.20983          8        unit 2.269191</span>
<span class="co">#&gt; 10   25.05760, 60.17415          9        unit 2.268221</span></code></pre></div>
<p>Function <code><a href="../reference/get_linkedevents.html">get_linkedevents()</a></code> retrieves regional event data from the new <a href="http://api.hel.fi/linkedevents/v0.1/" class="external-link">Linked Events API</a>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Search for current events</span>
<span class="va">events</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_linkedevents.html">get_linkedevents</a></span><span class="op">(</span>query<span class="op">=</span><span class="st">"event"</span><span class="op">)</span>
<span class="co"># Get names for the first 20 results</span>
<span class="va">events</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">name</span><span class="op">$</span><span class="va">fi</span>
<span class="co">#&gt;  [1] "Pohjois-Norjan rannikkoreitit"                  </span>
<span class="co">#&gt;  [2] "Digital guidance online in Arabic and English"  </span>
<span class="co">#&gt;  [3] "Turvamies"                                      </span>
<span class="co">#&gt;  [4] NA                                               </span>
<span class="co">#&gt;  [5] "Saikkua, Kiitos! Osa 3"                         </span>
<span class="co">#&gt;  [6] "Everstinna"                                     </span>
<span class="co">#&gt;  [7] "Niin Kuin Taivaassa"                            </span>
<span class="co">#&gt;  [8] "Club Act!One"                                   </span>
<span class="co">#&gt;  [9] "Kiviä Taskussa"                                 </span>
<span class="co">#&gt; [10] "Lapset"                                         </span>
<span class="co">#&gt; [11] "Paahtimo"                                       </span>
<span class="co">#&gt; [12] "Once + Replik!"                                 </span>
<span class="co">#&gt; [13] "Den Besynnerliga Händelsen Med Hunden Om Natten"</span>
<span class="co">#&gt; [14] "Baskervillen Koira"                             </span>
<span class="co">#&gt; [15] "Bolla"                                          </span>
<span class="co">#&gt; [16] "Tatu Ja Patu Helsingissä"                       </span>
<span class="co">#&gt; [17] "Lapset"                                         </span>
<span class="co">#&gt; [18] "Niin Kuin Taivaassa"                            </span>
<span class="co">#&gt; [19] "Kiviä Taskussa"                                 </span>
<span class="co">#&gt; [20] "Lapset"</span>
<span class="co"># See what kind of data is given for events</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">events</span><span class="op">$</span><span class="va">data</span><span class="op">)</span>
<span class="co">#&gt;  [1] "id"                    "location"              "keywords"             </span>
<span class="co">#&gt;  [4] "super_event"           "event_status"          "external_links"       </span>
<span class="co">#&gt;  [7] "offers"                "data_source"           "publisher"            </span>
<span class="co">#&gt; [10] "sub_events"            "images"                "videos"               </span>
<span class="co">#&gt; [13] "in_language"           "audience"              "created_time"         </span>
<span class="co">#&gt; [16] "last_modified_time"    "date_published"        "start_time"           </span>
<span class="co">#&gt; [19] "end_time"              "custom_data"           "audience_min_age"     </span>
<span class="co">#&gt; [22] "audience_max_age"      "super_event_type"      "deleted"              </span>
<span class="co">#&gt; [25] "replaced_by"           "description"           "provider"             </span>
<span class="co">#&gt; [28] "provider_contact_info" "short_description"     "location_extra_info"  </span>
<span class="co">#&gt; [31] "info_url"              "name"                  "@id"                  </span>
<span class="co">#&gt; [34] "@context"              "@type"</span></code></pre></div>
</div>
<div id="helsinki-region-infoshare-statistics-api" class="section level2">
<h2 class="hasAnchor">
<a href="#helsinki-region-infoshare-statistics-api" class="anchor" aria-hidden="true"></a>Helsinki Region Infoshare statistics API</h2>
<p>Function <code><a href="../reference/get_hri_stats.html">get_hri_stats()</a></code> retrieves data from the <a href="http://dev.hel.fi/stats/" class="external-link">Helsinki Region Infoshare statistics API</a>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Retrieve list of available data</span>
<span class="va">stats.list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_hri_stats.html">get_hri_stats</a></span><span class="op">(</span>query<span class="op">=</span><span class="st">""</span><span class="op">)</span>
<span class="co"># Show first results</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">stats.list</span><span class="op">)</span>
<span class="co">#&gt;                                      NULL </span>
<span class="co">#&gt;             "L113_viheralue_kaupunginosa" </span>
<span class="co">#&gt;                                      NULL </span>
<span class="co">#&gt;                      "L32_yksikkopaastot" </span>
<span class="co">#&gt;                                      NULL </span>
<span class="co">#&gt;                   "J1_loppusijoitettavat" </span>
<span class="co">#&gt;                                      NULL </span>
<span class="co">#&gt;                    "I13_maailman_paastot" </span>
<span class="co">#&gt;                                      NULL </span>
<span class="co">#&gt;       "J13_sekajatteen_maara_kiinteistot" </span>
<span class="co">#&gt;  Helsingin väestö äidinkielen mukaan 1.1. </span>
<span class="co">#&gt; "aluesarjat_a03s_hki_vakiluku_aidinkieli"</span></code></pre></div>
<p>Specify a dataset to retrieve. The output is currently a three-dimensional array.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Retrieve a specific dataset</span>
<span class="va">stats.res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_hri_stats.html">get_hri_stats</a></span><span class="op">(</span>query<span class="op">=</span><span class="va">stats.list</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>
<span class="co"># Show the structure of the results</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">stats.res</span><span class="op">)</span>
<span class="co">#&gt;  num [1:6, 1:34] 11606 5607 2.07 0.65 0.15 ...</span>
<span class="co">#&gt;  - attr(*, "dimnames")=List of 2</span>
<span class="co">#&gt;   ..$ muuttuja  : chr [1:6] "Asukkaita" "Asukastiheys (hlö/km2)" "Maapinta-ala (km2)" "Viheralueiden pinta-ala (km2)" ...</span>
<span class="co">#&gt;   ..$ peruspiiri: chr [1:34] "Vironniemi" "Ullanlinna" "Kampinmalmi" "Taka-Töölö" ...</span></code></pre></div>
</div>
<div id="licensing-and-citations" class="section level2">
<h2 class="hasAnchor">
<a href="#licensing-and-citations" class="anchor" aria-hidden="true"></a>Licensing and Citations</h2>
<div id="citing-the-data" class="section level3">
<h3 class="hasAnchor">
<a href="#citing-the-data" class="anchor" aria-hidden="true"></a>Citing the data</h3>
<p>See <code>help()</code> to get citation information for each function and related data sources.</p>
<p>If no such information is explicitly stated, see data provider’s website for more information.</p>
</div>
<div id="citing-the-r-package" class="section level3">
<h3 class="hasAnchor">
<a href="#citing-the-r-package" class="anchor" aria-hidden="true"></a>Citing the R package</h3>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">citation</span>(<span class="st">"helsinki"</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>Kindly cite the helsinki R package as follows<span class="sc">:</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  (C) Juuso Parkkinen, Leo Lahti and Joona Lehtomaki <span class="fl">2014.</span> helsinki R</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  package</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>A BibTeX entry <span class="cf">for</span> LaTeX users is</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="sc">@</span>Misc{,</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>    title <span class="ot">=</span> {helsinki R package},</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    author <span class="ot">=</span> {Juuso Parkkinen and Joona Lehtomaki and Leo Lahti},</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>    year <span class="ot">=</span> {<span class="dv">2014</span>},</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>Many thanks <span class="cf">for</span> all contributors<span class="sc">!</span> For more info, see<span class="sc">:</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>https<span class="sc">:</span><span class="er">//</span>github.com<span class="sc">/</span>rOpenGov<span class="sc">/</span>helsinki</span></code></pre></div>
</div>
<div id="session-info" class="section level3">
<h3 class="hasAnchor">
<a href="#session-info" class="anchor" aria-hidden="true"></a>Session info</h3>
<p>This vignette was created with</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/sessionInfo.html" class="external-link">sessionInfo</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; R version 4.0.5 (2021-03-31)</span>
<span class="co">#&gt; Platform: x86_64-apple-darwin17.0 (64-bit)</span>
<span class="co">#&gt; Running under: macOS Big Sur 10.16</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Matrix products: default</span>
<span class="co">#&gt; BLAS:   /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib</span>
<span class="co">#&gt; LAPACK: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; locale:</span>
<span class="co">#&gt; [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; attached base packages:</span>
<span class="co">#&gt; [1] stats     graphics  grDevices utils     datasets  methods   base     </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; other attached packages:</span>
<span class="co">#&gt; [1] sp_1.4-5        helsinki_0.9.40</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; loaded via a namespace (and not attached):</span>
<span class="co">#&gt;  [1] tidyselect_1.1.0   xfun_0.22          bslib_0.2.4        purrr_0.3.4       </span>
<span class="co">#&gt;  [5] sf_0.9-8           lattice_0.20-41    vctrs_0.3.8        generics_0.1.0    </span>
<span class="co">#&gt;  [9] htmltools_0.5.1.1  yaml_2.2.1         utf8_1.2.1         rlang_0.4.11      </span>
<span class="co">#&gt; [13] e1071_1.7-6        pkgdown_1.6.1.9001 jquerylib_0.1.4    pillar_1.6.0      </span>
<span class="co">#&gt; [17] glue_1.4.2         DBI_1.1.1          lifecycle_1.0.0    stringr_1.4.0     </span>
<span class="co">#&gt; [21] ragg_1.1.2         memoise_2.0.0      evaluate_0.14      knitr_1.33        </span>
<span class="co">#&gt; [25] fastmap_1.1.0      curl_4.3.1         class_7.3-18       fansi_0.4.2       </span>
<span class="co">#&gt; [29] Rcpp_1.0.6         KernSmooth_2.23-18 classInt_0.4-3     cachem_1.0.4      </span>
<span class="co">#&gt; [33] desc_1.3.0         jsonlite_1.7.2     systemfonts_1.0.1  fs_1.5.0          </span>
<span class="co">#&gt; [37] textshaping_0.3.3  digest_0.6.27      stringi_1.5.3      dplyr_1.0.5       </span>
<span class="co">#&gt; [41] grid_4.0.5         rprojroot_2.0.2    tools_4.0.5        magrittr_2.0.1    </span>
<span class="co">#&gt; [45] sass_0.3.1         proxy_0.4-25       tibble_3.1.1       crayon_1.4.1      </span>
<span class="co">#&gt; [49] httpcache_1.2.0    pkgconfig_2.0.3    ellipsis_0.3.2     xml2_1.3.2        </span>
<span class="co">#&gt; [53] assertthat_0.2.1   rmarkdown_2.7      httr_1.4.2         R6_2.5.0          </span>
<span class="co">#&gt; [57] units_0.7-1        compiler_4.0.5</span></code></pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Juuso Parkkinen, Pyry Kantanen, Leo Lahti.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link external-link">pkgdown</a> 1.6.1.9001.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
